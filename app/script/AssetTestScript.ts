import type { IEthereumVirtualMachine } from "../class/ethereumVirtualMachine/IEthereumVirtualMachine.ts";
import type { ISolFile } from "../class/host/file/ISolFile.ts";
import { EthereumVirtualMachine } from "../class/ethereumVirtualMachine/EthereumVirtualMachine.ts";
import { ethers as Ethers } from "ethers";
import { SolFile } from "../class/host/file/SolFile.ts";
import { Path } from "../class/host/Path.ts";
import { secret } from "../class/host/Secret.ts";
import * as TsResult from "ts-results";

(async function() {
    const url: string = "https://rpc.tenderly.co/fork/223ed3c7-8cef-4b80-bbfc-99ee8a4de882";
    const key: TsResult.Option<string> = secret("polygonPrivateKey");
    const node: Ethers.JsonRpcProvider = new Ethers.JsonRpcProvider(url);
    const signer: Ethers.Wallet = new Ethers.Wallet(key.unwrap(), node);
    const machine: IEthereumVirtualMachine = EthereumVirtualMachine(signer);
    const abi = [
        {
            "inputs": [
                {
                    "internalType": "address[]",
                    "name": "path",
                    "type": "address[]"
                },
                {
                    "internalType": "uint256",
                    "name": "targetAllocation",
                    "type": "uint256"
                }
            ],
            "stateMutability": "nonpayable",
            "type": "constructor"
        },
        {
            "inputs": [],
            "name": "InsufficientYield",
            "type": "error"
        },
        {
            "inputs": [],
            "name": "PairIsWorthless",
            "type": "error"
        },
        {
            "inputs": [],
            "name": "PairNotFound",
            "type": "error"
        },
        {
            "inputs": [],
            "name": "PathCannotBeLongerThan10",
            "type": "error"
        },
        {
            "inputs": [],
            "name": "PathCannotBeShorterThan2",
            "type": "error"
        },
        {
            "inputs": [
                {
                    "internalType": "uint8",
                    "name": "decimals0",
                    "type": "uint8"
                },
                {
                    "internalType": "uint8",
                    "name": "decimals1",
                    "type": "uint8"
                }
            ],
            "name": "PrecisionLoss",
            "type": "error"
        },
        {
            "inputs": [],
            "name": "UnrecognizedLayout",
            "type": "error"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "previousOwner",
                    "type": "address"
                },
                {
                    "indexed": true,
                    "internalType": "address",
                    "name": "newOwner",
                    "type": "address"
                }
            ],
            "name": "OwnershipTransferred",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": false,
                    "internalType": "uint256",
                    "name": "amountIn",
                    "type": "uint256"
                },
                {
                    "indexed": false,
                    "internalType": "uint256",
                    "name": "amountOut",
                    "type": "uint256"
                }
            ],
            "name": "Purchase",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": false,
                    "internalType": "uint256",
                    "name": "amountIn",
                    "type": "uint256"
                },
                {
                    "indexed": false,
                    "internalType": "uint256",
                    "name": "amountOut",
                    "type": "uint256"
                }
            ],
            "name": "Sale",
            "type": "event"
        },
        {
            "inputs": [],
            "name": "bestAssets",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "amountIn",
                    "type": "uint256"
                }
            ],
            "name": "bestBuySideAmountOut",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "amountIn",
                    "type": "uint256"
                }
            ],
            "name": "bestSellSideAmountOut",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "amountIn",
                    "type": "uint256"
                }
            ],
            "name": "buy",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "buySidePath",
            "outputs": [
                {
                    "internalType": "address[]",
                    "name": "",
                    "type": "address[]"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "buySideQuote",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "amountIn",
                    "type": "uint256"
                }
            ],
            "name": "buySideYield",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "owner",
            "outputs": [
                {
                    "internalType": "address",
                    "name": "",
                    "type": "address"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "realAssets",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "amountIn",
                    "type": "uint256"
                }
            ],
            "name": "realBuySideAmountOut",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "amountIn",
                    "type": "uint256"
                }
            ],
            "name": "realSellSideAmountOut",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "renounceOwnership",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "amountIn",
                    "type": "uint256"
                }
            ],
            "name": "sell",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "sellSidePath",
            "outputs": [
                {
                    "internalType": "address[]",
                    "name": "",
                    "type": "address[]"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "sellSideQuote",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "uint256",
                    "name": "amountIn",
                    "type": "uint256"
                }
            ],
            "name": "sellSideYield",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [],
            "name": "targetAllocation",
            "outputs": [
                {
                    "internalType": "uint256",
                    "name": "percentage",
                    "type": "uint256"
                }
            ],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "internalType": "address",
                    "name": "newOwner",
                    "type": "address"
                }
            ],
            "name": "transferOwnership",
            "outputs": [],
            "stateMutability": "nonpayable",
            "type": "function"
        }
    ];
    const bytecode = "608060405234801561000f575f80fd5b5060405161437c38038061437c83398181016040528101906100319190610fc3565b336100418161021d60201b60201c565b505f825190506002811015610082576040517fcc56455800000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600a8111156100bd576040517f119a55b000000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5f5b818110156101555760018482815181106100dc576100db61101d565b5b6020026020010151908060018154018082558091505060019003905f5260205f20015f9091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060018161014e9190611077565b90506100bf565b505f73ffffffffffffffffffffffffffffffffffffffff1661017b6102de60201b60201c565b73ffffffffffffffffffffffffffffffffffffffff16036101c8576040517fd719ab6900000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5f6101d761038c60201b60201c565b0361020e576040517fbc21eb9700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b81600281905550505050611525565b5f805f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050815f806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b5f735757371414417b8c6caad45baef941abc7d3ab3273ffffffffffffffffffffffffffffffffffffffff1663e6a4390561031d61045d60201b60201c565b61032b61049f60201b60201c565b6040518363ffffffff1660e01b81526004016103489291906110b9565b602060405180830381865afa158015610363573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061038791906110e0565b905090565b5f8060028111156103a05761039f61110b565b5b6103ae6104f060201b60201c565b60028111156103c0576103bf61110b565b5b036103da576103d36107f860201b60201c565b905061045a565b600160028111156103ee576103ed61110b565b5b6103fc6104f060201b60201c565b600281111561040e5761040d61110b565b5b036104285761042161091260201b60201c565b905061045a565b6040517f5b9c3c8900000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b90565b5f60015f815481106104725761047161101d565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b5f60018080805490506104b29190611138565b815481106104c3576104c261101d565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b5f6104ff6102de60201b60201c565b73ffffffffffffffffffffffffffffffffffffffff16630dfe16816040518163ffffffff1660e01b8152600401602060405180830381865afa158015610547573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061056b91906110e0565b73ffffffffffffffffffffffffffffffffffffffff1661058f61045d60201b60201c565b73ffffffffffffffffffffffffffffffffffffffff1614801561066357506105bb6102de60201b60201c565b73ffffffffffffffffffffffffffffffffffffffff1663d21220a76040518163ffffffff1660e01b8152600401602060405180830381865afa158015610603573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061062791906110e0565b73ffffffffffffffffffffffffffffffffffffffff1661064b61049f60201b60201c565b73ffffffffffffffffffffffffffffffffffffffff16145b15610670575f90506107f5565b61067e6102de60201b60201c565b73ffffffffffffffffffffffffffffffffffffffff1663d21220a76040518163ffffffff1660e01b8152600401602060405180830381865afa1580156106c6573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106ea91906110e0565b73ffffffffffffffffffffffffffffffffffffffff1661070e61045d60201b60201c565b73ffffffffffffffffffffffffffffffffffffffff161480156107e2575061073a6102de60201b60201c565b73ffffffffffffffffffffffffffffffffffffffff16630dfe16816040518163ffffffff1660e01b8152600401602060405180830381865afa158015610782573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107a691906110e0565b73ffffffffffffffffffffffffffffffffffffffff166107ca61049f60201b60201c565b73ffffffffffffffffffffffffffffffffffffffff16145b156107f057600190506107f5565b600290505b90565b5f61090d73a5e0829caced8ffdd4de3c43696c57f7d7a678ff73ffffffffffffffffffffffffffffffffffffffff1663ad615dec61083a610a2c60201b60201c565b600a61084691906112a6565b610854610aac60201b60201c565b5f815181106108665761086561101d565b5b602002602001015161087c610aac60201b60201c565b60018151811061088f5761088e61101d565b5b60200260200101516040518463ffffffff1660e01b81526004016108b5939291906112ff565b602060405180830381865afa1580156108d0573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906108f49190611334565b610902610be260201b60201c565b610c6260201b60201c565b905090565b5f610a2773a5e0829caced8ffdd4de3c43696c57f7d7a678ff73ffffffffffffffffffffffffffffffffffffffff1663ad615dec610954610be260201b60201c565b600a61096091906112a6565b61096e610aac60201b60201c565b6001815181106109815761098061101d565b5b6020026020010151610997610aac60201b60201c565b5f815181106109a9576109a861101d565b5b60200260200101516040518463ffffffff1660e01b81526004016109cf939291906112ff565b602060405180830381865afa1580156109ea573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610a0e9190611334565b610a1c610be260201b60201c565b610c6260201b60201c565b905090565b5f610a3b61045d60201b60201c565b73ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015610a83573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610aa79190611389565b905090565b60605f600267ffffffffffffffff811115610aca57610ac9610dfa565b5b604051908082528060200260200182016040528015610af85781602001602082028036833780820191505090505b509050610b096102de60201b60201c565b73ffffffffffffffffffffffffffffffffffffffff16630902f1ac6040518163ffffffff1660e01b8152600401606060405180830381865afa158015610b51573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610b759190611430565b826dffffffffffffffffffffffffffff169250816dffffffffffffffffffffffffffff16915050825f81518110610baf57610bae61101d565b5b6020026020010183600181518110610bca57610bc961101d565b5b60200260200101828152508281525050508091505090565b5f610bf161049f60201b60201c565b73ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015610c39573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610c5d9190611389565b905090565b5f610c7583836012610c7d60201b60201c565b905092915050565b5f610ca78483600a610c8f91906112a6565b85600a610c9c91906112a6565b610cb060201b60201c565b90509392505050565b5f610cc2848484610ccb60201b60201c565b90509392505050565b5f805f80198587098587029250828110838203039150505f8103610d0357838281610cf957610cf8611480565b5b0492505050610dce565b808411610d45576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d3c90611507565b60405180910390fd5b5f8486880990508281118203915080830392505f60018619018616905080860495508084049350600181825f0304019050808302841793505f600287600302189050808702600203810290508087026002038102905080870260020381029050808702600203810290508087026002038102905080870260020381029050808502955050505050505b9392505050565b5f604051905090565b5f80fd5b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b610e3082610dea565b810181811067ffffffffffffffff82111715610e4f57610e4e610dfa565b5b80604052505050565b5f610e61610dd5565b9050610e6d8282610e27565b919050565b5f67ffffffffffffffff821115610e8c57610e8b610dfa565b5b602082029050602081019050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610eca82610ea1565b9050919050565b610eda81610ec0565b8114610ee4575f80fd5b50565b5f81519050610ef581610ed1565b92915050565b5f610f0d610f0884610e72565b610e58565b90508083825260208201905060208402830185811115610f3057610f2f610e9d565b5b835b81811015610f595780610f458882610ee7565b845260208401935050602081019050610f32565b5050509392505050565b5f82601f830112610f7757610f76610de6565b5b8151610f87848260208601610efb565b91505092915050565b5f819050919050565b610fa281610f90565b8114610fac575f80fd5b50565b5f81519050610fbd81610f99565b92915050565b5f8060408385031215610fd957610fd8610dde565b5b5f83015167ffffffffffffffff811115610ff657610ff5610de2565b5b61100285828601610f63565b925050602061101385828601610faf565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f61108182610f90565b915061108c83610f90565b92508282019050808211156110a4576110a361104a565b5b92915050565b6110b381610ec0565b82525050565b5f6040820190506110cc5f8301856110aa565b6110d960208301846110aa565b9392505050565b5f602082840312156110f5576110f4610dde565b5b5f61110284828501610ee7565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602160045260245ffd5b5f61114282610f90565b915061114d83610f90565b92508282039050818111156111655761116461104a565b5b92915050565b5f8160011c9050919050565b5f808291508390505b60018511156111c05780860481111561119c5761119b61104a565b5b60018516156111ab5780820291505b80810290506111b98561116b565b9450611180565b94509492505050565b5f826111d85760019050611293565b816111e5575f9050611293565b81600181146111fb576002811461120557611234565b6001915050611293565b60ff8411156112175761121661104a565b5b8360020a91508482111561122e5761122d61104a565b5b50611293565b5060208310610133831016604e8410600b84101617156112695782820a9050838111156112645761126361104a565b5b611293565b6112768484846001611177565b9250905081840481111561128d5761128c61104a565b5b81810290505b9392505050565b5f60ff82169050919050565b5f6112b082610f90565b91506112bb8361129a565b92506112e87fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff84846111c9565b905092915050565b6112f981610f90565b82525050565b5f6060820190506113125f8301866112f0565b61131f60208301856112f0565b61132c60408301846112f0565b949350505050565b5f6020828403121561134957611348610dde565b5b5f61135684828501610faf565b91505092915050565b6113688161129a565b8114611372575f80fd5b50565b5f815190506113838161135f565b92915050565b5f6020828403121561139e5761139d610dde565b5b5f6113ab84828501611375565b91505092915050565b5f6dffffffffffffffffffffffffffff82169050919050565b6113d6816113b4565b81146113e0575f80fd5b50565b5f815190506113f1816113cd565b92915050565b5f63ffffffff82169050919050565b61140f816113f7565b8114611419575f80fd5b50565b5f8151905061142a81611406565b92915050565b5f805f6060848603121561144757611446610dde565b5b5f611454868287016113e3565b9350506020611465868287016113e3565b92505060406114768682870161141c565b9150509250925092565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffd5b5f82825260208201905092915050565b7f4d6174683a206d756c446976206f766572666c6f7700000000000000000000005f82015250565b5f6114f16015836114ad565b91506114fc826114bd565b602082019050919050565b5f6020820190508181035f83015261151e816114e5565b9050919050565b612e4a806115325f395ff3fe608060405234801561000f575f80fd5b5060043610610113575f3560e01c8063960a5a0f116100a0578063e4849b321161006f578063e4849b32146102f5578063ed6d771314610325578063ee3cf29714610343578063f2fde38b14610373578063fb21b9b71461038f57610113565b8063960a5a0f14610259578063a8c2d1f214610277578063c1a2884614610295578063d96a094a146102c557610113565b80636ec80a48116100e75780636ec80a48146101b3578063715018a6146101e3578063847bad3b146101ed57806384bd91831461021d5780638da5cb5b1461023b57610113565b80627f0093146101175780630b5eda36146101355780632f686c921461016557806356c0757314610195575b5f80fd5b61011f6103ad565b60405161012c9190612339565b60405180910390f35b61014f600480360381019061014a919061239d565b6104cf565b60405161015c91906123d7565b60405180910390f35b61017f600480360381019061017a919061239d565b6104eb565b60405161018c91906123d7565b60405180910390f35b61019d610507565b6040516101aa91906123d7565b60405180910390f35b6101cd60048036038101906101c8919061239d565b6105c4565b6040516101da91906123d7565b60405180910390f35b6101eb6106a5565b005b6102076004803603810190610202919061239d565b6106b8565b60405161021491906123d7565b60405180910390f35b6102256106e7565b60405161023291906123d7565b60405180910390f35b6102436107a4565b60405161025091906123ff565b60405180910390f35b6102616107cb565b60405161026e91906123d7565b60405180910390f35b61027f610884565b60405161028c91906123d7565b60405180910390f35b6102af60048036038101906102aa919061239d565b61088d565b6040516102bc91906123d7565b60405180910390f35b6102df60048036038101906102da919061239d565b61096e565b6040516102ec91906123d7565b60405180910390f35b61030f600480360381019061030a919061239d565b610d69565b60405161031c91906123d7565b60405180910390f35b61032d611164565b60405161033a9190612339565b60405180910390f35b61035d6004803603810190610358919061239d565b61126b565b60405161036a91906123d7565b60405180910390f35b61038d60048036038101906103889190612442565b61129a565b005b61039761131c565b6040516103a491906123d7565b60405180910390f35b60605f60018054905067ffffffffffffffff8111156103cf576103ce61246d565b5b6040519080825280602002602001820160405280156103fd5781602001602082028036833780820191505090505b5090505f5b6001805490508110156104c7576001816001808054905061042391906124c7565b61042d91906124c7565b8154811061043e5761043d6124fa565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16828281518110610479576104786124fa565b5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250506001816104c09190612527565b9050610402565b508091505090565b5f6104e4826104dc61131c565b6012806113d5565b9050919050565b5f610500826104f86107cb565b6012806113d5565b9050919050565b5f80610511611419565b73ffffffffffffffffffffffffffffffffffffffff166370a082316105346107a4565b6040518263ffffffff1660e01b815260040161055091906123ff565b602060405180830381865afa15801561056b573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061058f919061256e565b90505f81036105a1575f9150506105c1565b6105b2816105ad61145b565b6114d5565b90506105bd816105c4565b9150505b90565b5f8073a5e0829caced8ffdd4de3c43696c57f7d7a678ff73ffffffffffffffffffffffffffffffffffffffff1663d06ca61f846105ff611164565b6040518363ffffffff1660e01b815260040161061c929190612599565b5f60405180830381865afa158015610636573d5f803e3d5ffd5b505050506040513d5f823e3d601f19601f8201168201806040525081019061065e91906126ea565b90505f816001835161067091906124c7565b81518110610681576106806124fa565b5b6020026020010151905061069c816106976114ea565b6114d5565b92505050919050565b6106ad611564565b6106b65f6115e2565b565b5f806106c3836104eb565b90505f6106cf846105c4565b90506106de81836012806116a3565b92505050919050565b5f806106f1611419565b73ffffffffffffffffffffffffffffffffffffffff166370a082316107146107a4565b6040518263ffffffff1660e01b815260040161073091906123ff565b602060405180830381865afa15801561074b573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061076f919061256e565b90505f8103610781575f9150506107a1565b6107928161078d61145b565b6114d5565b905061079d816104eb565b9150505b90565b5f805f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b5f8060028111156107df576107de612731565b5b6107e7611712565b60028111156107f9576107f8612731565b5b0361080d576108066119ea565b9050610881565b6001600281111561082157610820612731565b5b610829611712565b600281111561083b5761083a612731565b5b0361084f57610848611ae6565b9050610881565b6040517f5b9c3c8900000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b90565b5f600254905090565b5f8073a5e0829caced8ffdd4de3c43696c57f7d7a678ff73ffffffffffffffffffffffffffffffffffffffff1663d06ca61f846108c86103ad565b6040518363ffffffff1660e01b81526004016108e5929190612599565b5f60405180830381865afa1580156108ff573d5f803e3d5ffd5b505050506040513d5f823e3d601f19601f8201168201806040525081019061092791906126ea565b90505f816001835161093991906124c7565b8151811061094a576109496124fa565b5b602002602001015190506109658161096061145b565b6114d5565b92505050919050565b5f610977611564565b61097f611be2565b73ffffffffffffffffffffffffffffffffffffffff166323b872dd6109a26107a4565b30856040518463ffffffff1660e01b81526004016109c29392919061275e565b6020604051808303815f875af11580156109de573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610a0291906127c8565b5068054915956c40960000610a168361126b565b1015610a4e576040517ffa3505cf00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b610a56611be2565b73ffffffffffffffffffffffffffffffffffffffff1663095ea7b373a5e0829caced8ffdd4de3c43696c57f7d7a678ff5f6040518363ffffffff1660e01b8152600401610aa4929190612835565b6020604051808303815f875af1158015610ac0573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610ae491906127c8565b50610aed611be2565b73ffffffffffffffffffffffffffffffffffffffff1663095ea7b373a5e0829caced8ffdd4de3c43696c57f7d7a678ff610b3085610b296114ea565b6012611c33565b6040518363ffffffff1660e01b8152600401610b4d92919061285c565b6020604051808303815f875af1158015610b69573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610b8d91906127c8565b505f73a5e0829caced8ffdd4de3c43696c57f7d7a678ff73ffffffffffffffffffffffffffffffffffffffff166338ed1739610bd285610bcb6114ea565b6012611c33565b610bdb8661088d565b610be36103ad565b33426040518663ffffffff1660e01b8152600401610c05959493929190612883565b5f604051808303815f875af1158015610c20573d5f803e3d5ffd5b505050506040513d5f823e3d601f19601f82011682018060405250810190610c4891906126ea565b90505f8160018351610c5a91906124c7565b81518110610c6b57610c6a6124fa565b5b602002602001015190505f610c8782610c8261145b565b6114d5565b9050610c91611419565b73ffffffffffffffffffffffffffffffffffffffff1663a9059cbb610cb46107a4565b610cc7846012610cc261145b565b611c33565b6040518363ffffffff1660e01b8152600401610ce492919061285c565b6020604051808303815f875af1158015610d00573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610d2491906127c8565b507f350df6fcc944b226b77efc36902e19b43c566d75173622086e809d46dfbc22208582604051610d569291906128db565b60405180910390a1809350505050919050565b5f610d72611564565b610d7a611419565b73ffffffffffffffffffffffffffffffffffffffff166323b872dd610d9d6107a4565b30856040518463ffffffff1660e01b8152600401610dbd9392919061275e565b6020604051808303815f875af1158015610dd9573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610dfd91906127c8565b5068054915956c40960000610e11836106b8565b1015610e49576040517ffa3505cf00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b610e51611419565b73ffffffffffffffffffffffffffffffffffffffff1663095ea7b373a5e0829caced8ffdd4de3c43696c57f7d7a678ff5f6040518363ffffffff1660e01b8152600401610e9f929190612835565b6020604051808303815f875af1158015610ebb573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610edf91906127c8565b50610ee8611419565b73ffffffffffffffffffffffffffffffffffffffff1663095ea7b373a5e0829caced8ffdd4de3c43696c57f7d7a678ff610f2b85610f2461145b565b6012611c33565b6040518363ffffffff1660e01b8152600401610f4892919061285c565b6020604051808303815f875af1158015610f64573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610f8891906127c8565b505f73a5e0829caced8ffdd4de3c43696c57f7d7a678ff73ffffffffffffffffffffffffffffffffffffffff166338ed1739610fcd85610fc661145b565b6012611c33565b610fd6866105c4565b610fde611164565b33426040518663ffffffff1660e01b8152600401611000959493929190612883565b5f604051808303815f875af115801561101b573d5f803e3d5ffd5b505050506040513d5f823e3d601f19601f8201168201806040525081019061104391906126ea565b90505f816001835161105591906124c7565b81518110611066576110656124fa565b5b602002602001015190505f6110828261107d6114ea565b6114d5565b905061108c611be2565b73ffffffffffffffffffffffffffffffffffffffff1663a9059cbb6110af6107a4565b6110c28460126110bd6114ea565b611c33565b6040518363ffffffff1660e01b81526004016110df92919061285c565b6020604051808303815f875af11580156110fb573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061111f91906127c8565b507fdabca3bec2ab18bf51000cbc53d346d6d9df2ffff2bbb535f8c5bc9b1d784b9b85826040516111519291906128db565b60405180910390a1809350505050919050565b60605f60018054905067ffffffffffffffff8111156111865761118561246d565b5b6040519080825280602002602001820160405280156111b45781602001602082028036833780820191505090505b5090505f5b60018054905081101561126357600181815481106111da576111d96124fa565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16828281518110611215576112146124fa565b5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505060018161125c9190612527565b90506111b9565b508091505090565b5f80611276836104cf565b90505f6112828461088d565b905061129181836012806116a3565b92505050919050565b6112a2611564565b5f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603611310576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161130790612982565b60405180910390fd5b611319816115e2565b50565b5f8060028111156113305761132f612731565b5b611338611712565b600281111561134a57611349612731565b5b0361135e57611357611c60565b90506113d2565b6001600281111561137257611371612731565b5b61137a611712565b600281111561138c5761138b612731565b5b036113a057611399611d5c565b90506113d2565b6040517f5b9c3c8900000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b90565b5f6113e08383611e58565b6113ea85846114d5565b94506113f684836114d5565b935061140f858585600a61140a9190612adb565b611eb5565b9050949350505050565b5f60015f8154811061142e5761142d6124fa565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b5f611464611419565b73ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa1580156114ac573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906114d09190612b4f565b905090565b5f6114e283836012611c33565b905092915050565b5f6114f3611be2565b73ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa15801561153b573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061155f9190612b4f565b905090565b61156c611eca565b73ffffffffffffffffffffffffffffffffffffffff1661158a6107a4565b73ffffffffffffffffffffffffffffffffffffffff16146115e0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115d790612bc4565b60405180910390fd5b565b5f805f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050815f806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b5f6116ae8383611e58565b6116b885846114d5565b94506116c484836114d5565b93505f84036116d5575f905061170a565b5f85036116e4575f905061170a565b8385106116fa576116f3611ed1565b905061170a565b6117078585601280611ee1565b90505b949350505050565b5f61171b611f32565b73ffffffffffffffffffffffffffffffffffffffff16630dfe16816040518163ffffffff1660e01b8152600401602060405180830381865afa158015611763573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906117879190612bf6565b73ffffffffffffffffffffffffffffffffffffffff166117a5611419565b73ffffffffffffffffffffffffffffffffffffffff1614801561186d57506117cb611f32565b73ffffffffffffffffffffffffffffffffffffffff1663d21220a76040518163ffffffff1660e01b8152600401602060405180830381865afa158015611813573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906118379190612bf6565b73ffffffffffffffffffffffffffffffffffffffff16611855611be2565b73ffffffffffffffffffffffffffffffffffffffff16145b1561187a575f90506119e7565b611882611f32565b73ffffffffffffffffffffffffffffffffffffffff1663d21220a76040518163ffffffff1660e01b8152600401602060405180830381865afa1580156118ca573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906118ee9190612bf6565b73ffffffffffffffffffffffffffffffffffffffff1661190c611419565b73ffffffffffffffffffffffffffffffffffffffff161480156119d45750611932611f32565b73ffffffffffffffffffffffffffffffffffffffff16630dfe16816040518163ffffffff1660e01b8152600401602060405180830381865afa15801561197a573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061199e9190612bf6565b73ffffffffffffffffffffffffffffffffffffffff166119bc611be2565b73ffffffffffffffffffffffffffffffffffffffff16145b156119e257600190506119e7565b600290505b90565b5f611ae173a5e0829caced8ffdd4de3c43696c57f7d7a678ff73ffffffffffffffffffffffffffffffffffffffff1663ad615dec611a2661145b565b600a611a329190612adb565b611a3a611fd4565b5f81518110611a4c57611a4b6124fa565b5b6020026020010151611a5c611fd4565b600181518110611a6f57611a6e6124fa565b5b60200260200101516040518463ffffffff1660e01b8152600401611a9593929190612c21565b602060405180830381865afa158015611ab0573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190611ad4919061256e565b611adc6114ea565b6114d5565b905090565b5f611bdd73a5e0829caced8ffdd4de3c43696c57f7d7a678ff73ffffffffffffffffffffffffffffffffffffffff1663ad615dec611b226114ea565b600a611b2e9190612adb565b611b36611fd4565b600181518110611b4957611b486124fa565b5b6020026020010151611b59611fd4565b5f81518110611b6b57611b6a6124fa565b5b60200260200101516040518463ffffffff1660e01b8152600401611b9193929190612c21565b602060405180830381865afa158015611bac573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190611bd0919061256e565b611bd86114ea565b6114d5565b905090565b5f6001808080549050611bf591906124c7565b81548110611c0657611c056124fa565b5b905f5260205f20015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b5f611c578483600a611c459190612adb565b85600a611c529190612adb565b611eb5565b90509392505050565b5f611d5773a5e0829caced8ffdd4de3c43696c57f7d7a678ff73ffffffffffffffffffffffffffffffffffffffff1663ad615dec611c9c6114ea565b600a611ca89190612adb565b611cb0611fd4565b600181518110611cc357611cc26124fa565b5b6020026020010151611cd3611fd4565b5f81518110611ce557611ce46124fa565b5b60200260200101516040518463ffffffff1660e01b8152600401611d0b93929190612c21565b602060405180830381865afa158015611d26573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190611d4a919061256e565b611d5261145b565b6114d5565b905090565b5f611e5373a5e0829caced8ffdd4de3c43696c57f7d7a678ff73ffffffffffffffffffffffffffffffffffffffff1663ad615dec611d9861145b565b600a611da49190612adb565b611dac611fd4565b5f81518110611dbe57611dbd6124fa565b5b6020026020010151611dce611fd4565b600181518110611de157611de06124fa565b5b60200260200101516040518463ffffffff1660e01b8152600401611e0793929190612c21565b602060405180830381865afa158015611e22573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190611e46919061256e565b611e4e61145b565b6114d5565b905090565b60128260ff161180611e6d575060128160ff16115b15611eb15781816040517f8d72b2b5000000000000000000000000000000000000000000000000000000008152600401611ea8929190612c65565b60405180910390fd5b5050565b5f611ec1848484612104565b90509392505050565b5f33905090565b5f68056bc75e2d63100000905090565b5f611eec8383611e58565b611ef685846114d5565b9450611f0284836114d5565b93505f611f118686868661220e565b9050611f2781611f1f611ed1565b6012806113d5565b915050949350505050565b5f735757371414417b8c6caad45baef941abc7d3ab3273ffffffffffffffffffffffffffffffffffffffff1663e6a43905611f6b611419565b611f73611be2565b6040518363ffffffff1660e01b8152600401611f90929190612c8c565b602060405180830381865afa158015611fab573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190611fcf9190612bf6565b905090565b60605f600267ffffffffffffffff811115611ff257611ff161246d565b5b6040519080825280602002602001820160405280156120205781602001602082028036833780820191505090505b50905061202b611f32565b73ffffffffffffffffffffffffffffffffffffffff16630902f1ac6040518163ffffffff1660e01b8152600401606060405180830381865afa158015612073573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906120979190612d2f565b826dffffffffffffffffffffffffffff169250816dffffffffffffffffffffffffffff16915050825f815181106120d1576120d06124fa565b5b60200260200101836001815181106120ec576120eb6124fa565b5b60200260200101828152508281525050508091505090565b5f805f80198587098587029250828110838203039150505f810361213c5783828161213257612131612d7f565b5b0492505050612207565b80841161217e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161217590612df6565b60405180910390fd5b5f8486880990508281118203915080830392505f60018619018616905080860495508084049350600181825f0304019050808302841793505f600287600302189050808702600203810290508087026002038102905080870260020381029050808702600203810290508087026002038102905080870260020381029050808502955050505050505b9392505050565b5f6122198383611e58565b61222385846114d5565b945061222f84836114d5565b93506122488584600a6122429190612adb565b86611eb5565b9050949350505050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6122a48261227b565b9050919050565b6122b48161229a565b82525050565b5f6122c583836122ab565b60208301905092915050565b5f602082019050919050565b5f6122e782612252565b6122f1818561225c565b93506122fc8361226c565b805f5b8381101561232c57815161231388826122ba565b975061231e836122d1565b9250506001810190506122ff565b5085935050505092915050565b5f6020820190508181035f83015261235181846122dd565b905092915050565b5f604051905090565b5f80fd5b5f80fd5b5f819050919050565b61237c8161236a565b8114612386575f80fd5b50565b5f8135905061239781612373565b92915050565b5f602082840312156123b2576123b1612362565b5b5f6123bf84828501612389565b91505092915050565b6123d18161236a565b82525050565b5f6020820190506123ea5f8301846123c8565b92915050565b6123f98161229a565b82525050565b5f6020820190506124125f8301846123f0565b92915050565b6124218161229a565b811461242b575f80fd5b50565b5f8135905061243c81612418565b92915050565b5f6020828403121561245757612456612362565b5b5f6124648482850161242e565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f6124d18261236a565b91506124dc8361236a565b92508282039050818111156124f4576124f361249a565b5b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b5f6125318261236a565b915061253c8361236a565b92508282019050808211156125545761255361249a565b5b92915050565b5f8151905061256881612373565b92915050565b5f6020828403121561258357612582612362565b5b5f6125908482850161255a565b91505092915050565b5f6040820190506125ac5f8301856123c8565b81810360208301526125be81846122dd565b90509392505050565b5f80fd5b5f601f19601f8301169050919050565b6125e4826125cb565b810181811067ffffffffffffffff821117156126035761260261246d565b5b80604052505050565b5f612615612359565b905061262182826125db565b919050565b5f67ffffffffffffffff8211156126405761263f61246d565b5b602082029050602081019050919050565b5f80fd5b5f61266761266284612626565b61260c565b9050808382526020820190506020840283018581111561268a57612689612651565b5b835b818110156126b3578061269f888261255a565b84526020840193505060208101905061268c565b5050509392505050565b5f82601f8301126126d1576126d06125c7565b5b81516126e1848260208601612655565b91505092915050565b5f602082840312156126ff576126fe612362565b5b5f82015167ffffffffffffffff81111561271c5761271b612366565b5b612728848285016126bd565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602160045260245ffd5b5f6060820190506127715f8301866123f0565b61277e60208301856123f0565b61278b60408301846123c8565b949350505050565b5f8115159050919050565b6127a781612793565b81146127b1575f80fd5b50565b5f815190506127c28161279e565b92915050565b5f602082840312156127dd576127dc612362565b5b5f6127ea848285016127b4565b91505092915050565b5f819050919050565b5f819050919050565b5f61281f61281a612815846127f3565b6127fc565b61236a565b9050919050565b61282f81612805565b82525050565b5f6040820190506128485f8301856123f0565b6128556020830184612826565b9392505050565b5f60408201905061286f5f8301856123f0565b61287c60208301846123c8565b9392505050565b5f60a0820190506128965f8301886123c8565b6128a360208301876123c8565b81810360408301526128b581866122dd565b90506128c460608301856123f0565b6128d160808301846123c8565b9695505050505050565b5f6040820190506128ee5f8301856123c8565b6128fb60208301846123c8565b9392505050565b5f82825260208201905092915050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f20615f8201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b5f61296c602683612902565b915061297782612912565b604082019050919050565b5f6020820190508181035f83015261299981612960565b9050919050565b5f8160011c9050919050565b5f808291508390505b60018511156129f5578086048111156129d1576129d061249a565b5b60018516156129e05780820291505b80810290506129ee856129a0565b94506129b5565b94509492505050565b5f82612a0d5760019050612ac8565b81612a1a575f9050612ac8565b8160018114612a305760028114612a3a57612a69565b6001915050612ac8565b60ff841115612a4c57612a4b61249a565b5b8360020a915084821115612a6357612a6261249a565b5b50612ac8565b5060208310610133831016604e8410600b8410161715612a9e5782820a905083811115612a9957612a9861249a565b5b612ac8565b612aab84848460016129ac565b92509050818404811115612ac257612ac161249a565b5b81810290505b9392505050565b5f60ff82169050919050565b5f612ae58261236a565b9150612af083612acf565b9250612b1d7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff84846129fe565b905092915050565b612b2e81612acf565b8114612b38575f80fd5b50565b5f81519050612b4981612b25565b92915050565b5f60208284031215612b6457612b63612362565b5b5f612b7184828501612b3b565b91505092915050565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65725f82015250565b5f612bae602083612902565b9150612bb982612b7a565b602082019050919050565b5f6020820190508181035f830152612bdb81612ba2565b9050919050565b5f81519050612bf081612418565b92915050565b5f60208284031215612c0b57612c0a612362565b5b5f612c1884828501612be2565b91505092915050565b5f606082019050612c345f8301866123c8565b612c4160208301856123c8565b612c4e60408301846123c8565b949350505050565b612c5f81612acf565b82525050565b5f604082019050612c785f830185612c56565b612c856020830184612c56565b9392505050565b5f604082019050612c9f5f8301856123f0565b612cac60208301846123f0565b9392505050565b5f6dffffffffffffffffffffffffffff82169050919050565b612cd581612cb3565b8114612cdf575f80fd5b50565b5f81519050612cf081612ccc565b92915050565b5f63ffffffff82169050919050565b612d0e81612cf6565b8114612d18575f80fd5b50565b5f81519050612d2981612d05565b92915050565b5f805f60608486031215612d4657612d45612362565b5b5f612d5386828701612ce2565b9350506020612d6486828701612ce2565b9250506040612d7586828701612d1b565b9150509250925092565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffd5b7f4d6174683a206d756c446976206f766572666c6f7700000000000000000000005f82015250565b5f612de0601583612902565b9150612deb82612dac565b602082019050919050565b5f6020820190508181035f830152612e0d81612dd4565b905091905056fea2646970667358221220c4ae4b7f9aa75f28c6c159922688bdf3823cd8db8c0d0414a22e8b3a01a3ebd464736f6c634300081a0033";
    // LINK
    const asset = "0x53E0bca35eC356BD5ddDFebbD1Fc0fD03FaBad39";
    // USDT
    const currency = "0xc2132D05D31c914a87C6611C10748AEb04B58e8F";
    const args = [[
        asset,
        "0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619", // ETH
        currency
    ], 20n * (10n**18n)];
    const deployment = await machine.deploy({ bytecode, abi, args });
    const to: string = deployment.unwrap()?.contractAddress!;
    const amountInUnits = 1n * (10n**18n);
    const amountInCurrency = 100_000_000n * (10n**18n);

    await (async function() {
        const targetAllocation = await machine.query({
            to,
            methodSignature: "function targetAllocation() external view returns (uint256)",
            methodName: "targetAllocation"
        });
        console.log(`target allocation => ${Number(targetAllocation.unwrap()) / 10**18}%`);
    })();

    await (async function() {
        const sellSidePath = await machine.query({
            to,
            methodSignature: "function sellSidePath() external view returns (address[] memory)",
            methodName: "sellSidePath"
        });
        console.log(sellSidePath.unwrap());
    })();

    await (async function() {
        const buySidePath = await machine.query({
            to,
            methodSignature: "function buySidePath() external view returns (address[] memory)",
            methodName: "buySidePath"
        });
        console.log(buySidePath.unwrap());
    })();

    await (async function() {
        const bestAssets = await machine.query({
            to,
            methodSignature: "function bestAssets() external view returns (uint256)",
            methodName: "bestAssets"
        });
        console.log(`best assets => $${Number(bestAssets.unwrap()) / 10**18}`);
    })();   

    await (async function() {
        const realAssets = await machine.query({
            to,
            methodSignature: "function realAssets() external view returns (uint256)",
            methodName: "realAssets"
        });
        console.log(`real assets => $${Number(realAssets.unwrap()) / 10**18}`);
    })();

    await (async function() {
        const sellSideYield = await machine.query({
            to,
            methodSignature: "function sellSideYield(uint256) external view returns (uint256)",
            methodName: "sellSideYield",
            methodArgs: [
                amountInUnits
            ]
        });
        console.log(`sell side yield => ${Number(sellSideYield.unwrap()) / 10**18}%`);
    })();

    await (async function() {
        const buySideYield = await machine.query({
            to,
            methodSignature: "function buySideYield(uint256) external view returns (uint256)",
            methodName: "buySideYield",
            methodArgs: [
                amountInCurrency
            ]
        });
        console.log(`buy side yield => ${Number(buySideYield.unwrap()) / 10**18}%`);
    })();

    await (async function() {
        const bestSellSideAmountOut = await machine.query({
            to,
            methodSignature: "function bestSellSideAmountOut(uint256) external view returns (uint256)",
            methodName: "bestSellSideAmountOut",
            methodArgs: [
                amountInUnits
            ]
        });
        console.log(`best sell side amount out => $${Number(bestSellSideAmountOut.unwrap()) / 10**18}`);
    })();

    await (async function() {
        const bestBuySideAmountOut = await machine.query({
            to,
            methodSignature: "function bestBuySideAmountOut(uint256) external view returns (uint256)",
            methodName: "bestBuySideAmountOut",
            methodArgs: [
                amountInCurrency
            ]
        });
        console.log(`best buy side amount out => ${Number(bestBuySideAmountOut.unwrap()) / 10**18} units`);
    })();

    await (async function() {
        const realSellSideAmountOut = await machine.query({
            to,
            methodSignature: "function realSellSideAmountOut(uint256) external view returns (uint256)",
            methodName: "realSellSideAmountOut",
            methodArgs: [
                amountInUnits
            ]
        });
        console.log(`real sell side amount out => $${Number(realSellSideAmountOut.unwrap()) / 10**18}`);
    })();

    await (async function() {
        const realBuySideAmountOut = await machine.query({
            to,
            methodSignature: "function realBuySideAmountOut(uint256) external view returns (uint256)",
            methodName: "realBuySideAmountOut",
            methodArgs: [
                amountInCurrency
            ]
        });
        console.log(`real buy side amount out => ${Number(realBuySideAmountOut.unwrap()) / 10**18} units`);
    })();

    await (async function() {
        const sellSideQuote = await machine.query({
            to,
            methodSignature: "function sellSideQuote() external view returns (uint256)",
            methodName: "sellSideQuote"
        });
        console.log(`sell side quote => $${Number(sellSideQuote.unwrap()) / 10**18}`);
    })();

    await (async function() {
        const buySideQuote = await machine.query({
            to,
            methodSignature: "function buySideQuote() external view returns (uint256)",
            methodName: "buySideQuote"
        });
        console.log(`buy side quote => ${Number(buySideQuote.unwrap()) / 10**18} units`);
    })();

    await (async function() {
        
    })();


})();