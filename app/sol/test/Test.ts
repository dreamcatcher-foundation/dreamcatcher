import { EthereumVirtualMachine } from "../../class/ethereumVirtualMachine/EthereumVirtualMachine.ts";
import { ethers as Ethers } from "ethers";
import { secret } from "../../class/host/Secret.ts";
import { File } from "../../class/host/file/File.ts";
import { Path } from "../../class/host/Path.ts";
import * as TsResult from "ts-results";




(async function() {
    let mainnetNodeUrl = "https://polygon-rpc.com";
    let testnetNodeUrl =  "https://rpc.tenderly.co/fork/ca9185f3-d050-4189-90b5-53d35e920601";
    let nodeUrl = testnetNodeUrl;
    let key = secret("polygonPrivateKey");
    if (key.none) {
        err("MISSING_PRIVATE_KEY");
        return;
    }
    let node = new Ethers.JsonRpcProvider(nodeUrl);
    let signer = new Ethers.Wallet(key.unwrap(), node);
    let machine = EthereumVirtualMachine(signer);

    await (async function() {
        let tokens = {
            usdc: "0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",
            weth: "0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619",
            wbtc: "0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6",
            link: "0x53E0bca35eC356BD5ddDFebbD1Fc0fD03FaBad39",
            wmatic: "0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270"
        };
        let factory = "0x5757371414417b8C6CAad45bAeF941aBc7d3Ab32";
        let router = "0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff";
        let adaptor = ((await (machine.deploy({ bytecode: "6080604052348015600e575f80fd5b506135268061001c5f395ff3fe608060405234801561000f575f80fd5b506004361061004a575f3560e01c80631dac821f1461004e5780634b08f1251461007e5780634fb76f3d146100ae5780639ef8b9ec146100de575b5f80fd5b61006860048036038101906100639190612215565b61010e565b60405161007591906122b7565b60405180910390f35b61009860048036038101906100939190612345565b6103ec565b6040516100a59190612452565b60405180910390f35b6100c860048036038101906100c39190612509565b610b86565b6040516100d59190612543565b60405180910390f35b6100f860048036038101906100f3919061255c565b611190565b604051610105919061268e565b60405180910390f35b610116611dcf565b5f73ffffffffffffffffffffffffffffffffffffffff16836060015173ffffffffffffffffffffffffffffffffffffffff161415801561018657505f73ffffffffffffffffffffffffffffffffffffffff16836080015173ffffffffffffffffffffffffffffffffffffffff1614155b801561019957505f8360a0015160ff1614155b80156101ac57505f8360c0015160ff1614155b80156101e857505f73ffffffffffffffffffffffffffffffffffffffff16836020015173ffffffffffffffffffffffffffffffffffffffff1614155b801561022457505f73ffffffffffffffffffffffffffffffffffffffff16836040015173ffffffffffffffffffffffffffffffffffffffff1614155b610263576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161025a90612702565b60405180910390fd5b5f8360e001516dffffffffffffffffffffffffffff161415801561029c57505f8361010001516dffffffffffffffffffffffffffff1614155b6102db576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102d29061276a565b60405180910390fd5b6102e3611dcf565b82815f018181525050610325838560e001516dffffffffffffffffffffffffffff168661010001516dffffffffffffffffffffffffffff168760400151611526565b816020018181525050610367838560e001516dffffffffffffffffffffffffffff168661010001516dffffffffffffffffffffffffffff1687604001516115d3565b81604001818152505061038281604001518260200151611680565b8160600181815250505f8160200151141580156103a357505f816040015114155b6103e2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103d9906127f8565b60405180910390fd5b8091505092915050565b6103f4611df3565b5f73ffffffffffffffffffffffffffffffffffffffff16825f015173ffffffffffffffffffffffffffffffffffffffff161415801561046357505f73ffffffffffffffffffffffffffffffffffffffff16826020015173ffffffffffffffffffffffffffffffffffffffff1614155b801561049f57505f73ffffffffffffffffffffffffffffffffffffffff16826040015173ffffffffffffffffffffffffffffffffffffffff1614155b80156104db57505f73ffffffffffffffffffffffffffffffffffffffff16826060015173ffffffffffffffffffffffffffffffffffffffff1614155b61051a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161051190612860565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff16825f015173ffffffffffffffffffffffffffffffffffffffff1663e6a43905846040015185606001516040518363ffffffff1660e01b815260040161057792919061288d565b602060405180830381865afa158015610592573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906105b691906128c8565b73ffffffffffffffffffffffffffffffffffffffff160361060c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106039061293d565b60405180910390fd5b610614611df3565b825f0151816020019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508260200151816040019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508260400151816060019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508260600151816080019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050806060015173ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015610750573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610774919061296f565b8160a0019060ff16908160ff1681525050806080015173ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa1580156107d2573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107f6919061296f565b8160c0019060ff16908160ff16815250505f816020015173ffffffffffffffffffffffffffffffffffffffff1663e6a43905836060015184608001516040518363ffffffff1660e01b815260040161084f92919061288d565b602060405180830381865afa15801561086a573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061088e91906128c8565b905080825f019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250505f8190505f808273ffffffffffffffffffffffffffffffffffffffff16630902f1ac6040518163ffffffff1660e01b8152600401606060405180830381865afa158015610916573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061093a91906129e7565b50915091505f8373ffffffffffffffffffffffffffffffffffffffff16630dfe16816040518163ffffffff1660e01b8152600401602060405180830381865afa158015610989573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906109ad91906128c8565b90508073ffffffffffffffffffffffffffffffffffffffff16866060015173ffffffffffffffffffffffffffffffffffffffff1614610a0b57610a06826dffffffffffffffffffffffffffff168760a001516012611709565b610a2c565b610a2b836dffffffffffffffffffffffffffff168760a001516012611709565b5b8660e001906dffffffffffffffffffffffffffff1690816dffffffffffffffffffffffffffff16815250508073ffffffffffffffffffffffffffffffffffffffff16866060015173ffffffffffffffffffffffffffffffffffffffff1614610ab357610aae836dffffffffffffffffffffffffffff168760c001516012611709565b610ad4565b610ad3826dffffffffffffffffffffffffffff168760c001516012611709565b5b8661010001906dffffffffffffffffffffffffffff1690816dffffffffffffffffffffffffffff16815250505f8660e001516dffffffffffffffffffffffffffff1614158015610b3957505f8661010001516dffffffffffffffffffffffffffff1614155b610b78576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b6f90612aa7565b60405180910390fd5b859650505050505050919050565b5f816040015182608001518360200151610ba18383836117cb565b505f73ffffffffffffffffffffffffffffffffffffffff16855f015173ffffffffffffffffffffffffffffffffffffffff1614158015610c1157505f73ffffffffffffffffffffffffffffffffffffffff16856020015173ffffffffffffffffffffffffffffffffffffffff1614155b8015610c4d57505f73ffffffffffffffffffffffffffffffffffffffff16856040015173ffffffffffffffffffffffffffffffffffffffff1614155b8015610c8957505f73ffffffffffffffffffffffffffffffffffffffff16856060015173ffffffffffffffffffffffffffffffffffffffff1614155b8015610c9957505f856080015114155b610cd8576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ccf90612b0f565b60405180910390fd5b610ce0611eca565b855f0151815f019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508560200151816020019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508560400151816040019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508560600151816060019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250505f610de5610ddb836103ec565b886080015161010e565b90505f815f015114158015610dfe57505f816020015114155b8015610e0e57505f816040015114155b8015610e1e57505f816060015114155b610e5d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e5490612b77565b60405180910390fd5b8660a0015181606001511115610ea8576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e9f90612c05565b60405180910390fd5b5f600267ffffffffffffffff811115610ec457610ec3611fba565b5b604051908082528060200260200182016040528015610ef25781602001602082028036833780820191505090505b5090508760400151815f81518110610f0d57610f0c612c23565b5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050876060015181600181518110610f6057610f5f612c23565b5b602002602001019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250505f886040015173ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015610fe8573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061100c919061296f565b90505f61101f8a60800151601284611709565b90505f8a6020015173ffffffffffffffffffffffffffffffffffffffff166338ed1739835f8733426040518663ffffffff1660e01b8152600401611067959493929190612d3a565b5f604051808303815f875af1158015611082573d5f803e3d5ffd5b505050506040513d5f823e3d601f19601f820116820180604052508101906110aa9190612e6e565b90505f81600183516110bc9190612ee2565b815181106110cd576110cc612c23565b5b602002602001015190505f6110e482866012611709565b90505f8103611128576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161111f90612f85565b60405180910390fd5b7f6c2b29894dc4c2af570f8fce5de753d9dfce4efc8b7b3a68aeb12e8be8ecd7768d604001518e606001518f60800151846040516111699493929190612fa3565b60405180910390a1809b505050505050505050611187838383611b04565b50505050919050565b611198611f46565b6111a0611f46565b8381602001818152505082816101400181815250506112ac856060015173ffffffffffffffffffffffffffffffffffffffff166370a08231336040518263ffffffff1660e01b81526004016111f59190612fe6565b602060405180830381865afa158015611210573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906112349190612fff565b866060015173ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015611281573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906112a5919061296f565b6012611709565b8160400181815250505f6112c486836040015161010e565b905080602001518260800181815250506112f96112ea8360800151846101400151611ba4565b68056bc75e2d63100000611bc0565b825f01818152505061132661131c83610140015168056bc75e2d63100000611ba4565b8360200151611bc0565b8260a0018181525050611337611eca565b8660200151815f019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508660400151816020019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508660800151816040019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508660600151816060019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250505f611430826103ec565b90505f611441828660a0015161010e565b905080602001518560600181815250508460600151856040015111611466575f611479565b61147885604001518660600151611bdc565b5b8560c00181815250508460600151856040015110611497575f6114aa565b6114a985606001518660400151611bdc565b5b8560e00181815250508460a001518560800151116114c8575f6114db565b6114da85608001518660a00151611bdc565b5b856101000181815250508460a001518560800151106114fa575f61150d565b61150c8560a001518660800151611bdc565b5b8561012001818152505084955050505050509392505050565b5f8085146115c7575f84148061153b57505f83145b6115c0578173ffffffffffffffffffffffffffffffffffffffff1663ad615dec8686866040518463ffffffff1660e01b815260040161157c9392919061302a565b602060405180830381865afa158015611597573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906115bb9190612fff565b6115c2565b5f5b6115c9565b5f5b9050949350505050565b5f808514611674575f8414806115e857505f83145b61166d578173ffffffffffffffffffffffffffffffffffffffff1663054d50d48686866040518463ffffffff1660e01b81526004016116299392919061302a565b602060405180830381865afa158015611644573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906116689190612fff565b61166f565b5f5b611676565b5f5b9050949350505050565b5f808314801561169057505f8214155b6116ff575f83141580156116a357505f82145b6116ef575f831480156116b557505f82145b6116df578183116116cf576116ca8383611c2b565b6116da565b68056bc75e2d631000005b6116ea565b68056bc75e2d631000005b6116fa565b68056bc75e2d631000005b611701565b5f5b905092915050565b5f60028360ff1610158015611722575060028260ff1610155b8015611732575060128360ff1611155b8015611742575060128260ff1611155b611781576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611778906130a9565b60405180910390fd5b5f84148061179457508160ff168360ff16145b6117c0576117bb8483600a6117a991906131f6565b85600a6117b691906131f6565b611c50565b6117c2565b835b90509392505050565b5f805f9054906101000a900460ff161561181a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016118119061328a565b60405180910390fd5b60015f806101000a81548160ff0219169083151502179055505f8473ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa15801561187d573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906118a1919061296f565b90505f8573ffffffffffffffffffffffffffffffffffffffff166370a08231336040518263ffffffff1660e01b81526004016118dd9190612fe6565b602060405180830381865afa1580156118f8573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061191c9190612fff565b90505f61192b82846012611709565b905080861115611970576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611967906132f2565b60405180910390fd5b5f61197d87601286611709565b90508773ffffffffffffffffffffffffffffffffffffffff166323b872dd3330846040518463ffffffff1660e01b81526004016119bc93929190613310565b6020604051808303815f875af11580156119d8573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906119fc919061337a565b508773ffffffffffffffffffffffffffffffffffffffff1663095ea7b3875f6040518363ffffffff1660e01b8152600401611a389291906133a5565b6020604051808303815f875af1158015611a54573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190611a78919061337a565b508773ffffffffffffffffffffffffffffffffffffffff1663095ea7b387836040518363ffffffff1660e01b8152600401611ab49291906133cc565b6020604051808303815f875af1158015611ad0573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190611af4919061337a565b5060019450505050509392505050565b5f8373ffffffffffffffffffffffffffffffffffffffff1663095ea7b3835f6040518363ffffffff1660e01b8152600401611b409291906133a5565b6020604051808303815f875af1158015611b5c573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190611b80919061337a565b505f805f6101000a81548160ff021916908315150217905550600190509392505050565b5f611bb883670de0b6b3a764000084611c50565b905092915050565b5f611bd48383670de0b6b3a7640000611c50565b905092915050565b5f82821115611c20576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611c179061343d565b60405180910390fd5b818303905092915050565b5f611c4868056bc75e2d63100000611c438585611c65565b611bdc565b905092915050565b5f611c5c848484611ca0565b90509392505050565b5f808303611c75575f9050611c9a565b81831015611c8c57611c878383611daa565b611c97565b68056bc75e2d631000005b90505b92915050565b5f805f80198587098587029250828110838203039150505f8103611cd857838281611cce57611ccd61345b565b5b0492505050611da3565b808411611d1a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611d11906134d2565b60405180910390fd5b5f8486880990508281118203915080830392505f60018619018616905080860495508084049350600181825f0304019050808302841793505f600287600302189050808702600203810290508087026002038102905080870260020381029050808702600203810290508087026002038102905080870260020381029050808502955050505050505b9392505050565b5f611dc7611db88484611ba4565b68056bc75e2d63100000611bc0565b905092915050565b60405180608001604052805f81526020015f81526020015f81526020015f81525090565b6040518061012001604052805f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f60ff1681526020015f60ff1681526020015f6dffffffffffffffffffffffffffff1681526020015f6dffffffffffffffffffffffffffff1681525090565b60405180608001604052805f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681525090565b6040518061016001604052805f81526020015f81526020015f81526020015f81526020015f81526020015f81526020015f81526020015f81526020015f81526020015f81526020015f81525090565b5f604051905090565b5f80fd5b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b611ff082611faa565b810181811067ffffffffffffffff8211171561200f5761200e611fba565b5b80604052505050565b5f612021611f95565b905061202d8282611fe7565b919050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61205b82612032565b9050919050565b61206b81612051565b8114612075575f80fd5b50565b5f8135905061208681612062565b92915050565b5f60ff82169050919050565b6120a18161208c565b81146120ab575f80fd5b50565b5f813590506120bc81612098565b92915050565b5f6dffffffffffffffffffffffffffff82169050919050565b6120e4816120c2565b81146120ee575f80fd5b50565b5f813590506120ff816120db565b92915050565b5f610120828403121561211b5761211a611fa6565b5b612126610120612018565b90505f61213584828501612078565b5f83015250602061214884828501612078565b602083015250604061215c84828501612078565b604083015250606061217084828501612078565b606083015250608061218484828501612078565b60808301525060a0612198848285016120ae565b60a08301525060c06121ac848285016120ae565b60c08301525060e06121c0848285016120f1565b60e0830152506101006121d5848285016120f1565b6101008301525092915050565b5f819050919050565b6121f4816121e2565b81146121fe575f80fd5b50565b5f8135905061220f816121eb565b92915050565b5f80610140838503121561222c5761222b611f9e565b5b5f61223985828601612105565b92505061012061224b85828601612201565b9150509250929050565b61225e816121e2565b82525050565b608082015f8201516122785f850182612255565b50602082015161228b6020850182612255565b50604082015161229e6040850182612255565b5060608201516122b16060850182612255565b50505050565b5f6080820190506122ca5f830184612264565b92915050565b5f608082840312156122e5576122e4611fa6565b5b6122ef6080612018565b90505f6122fe84828501612078565b5f83015250602061231184828501612078565b602083015250604061232584828501612078565b604083015250606061233984828501612078565b60608301525092915050565b5f6080828403121561235a57612359611f9e565b5b5f612367848285016122d0565b91505092915050565b61237981612051565b82525050565b6123888161208c565b82525050565b612397816120c2565b82525050565b61012082015f8201516123b25f850182612370565b5060208201516123c56020850182612370565b5060408201516123d86040850182612370565b5060608201516123eb6060850182612370565b5060808201516123fe6080850182612370565b5060a082015161241160a085018261237f565b5060c082015161242460c085018261237f565b5060e082015161243760e085018261238e565b5061010082015161244c61010085018261238e565b50505050565b5f610120820190506124665f83018461239d565b92915050565b5f60c0828403121561248157612480611fa6565b5b61248b60c0612018565b90505f61249a84828501612078565b5f8301525060206124ad84828501612078565b60208301525060406124c184828501612078565b60408301525060606124d584828501612078565b60608301525060806124e984828501612201565b60808301525060a06124fd84828501612201565b60a08301525092915050565b5f60c0828403121561251e5761251d611f9e565b5b5f61252b8482850161246c565b91505092915050565b61253d816121e2565b82525050565b5f6020820190506125565f830184612534565b92915050565b5f805f610160848603121561257457612573611f9e565b5b5f61258186828701612105565b93505061012061259386828701612201565b9250506101406125a586828701612201565b9150509250925092565b61016082015f8201516125c45f850182612255565b5060208201516125d76020850182612255565b5060408201516125ea6040850182612255565b5060608201516125fd6060850182612255565b5060808201516126106080850182612255565b5060a082015161262360a0850182612255565b5060c082015161263660c0850182612255565b5060e082015161264960e0850182612255565b5061010082015161265e610100850182612255565b50610120820151612673610120850182612255565b50610140820151612688610140850182612255565b50505050565b5f610160820190506126a25f8301846125af565b92915050565b5f82825260208201905092915050565b7f564f49445f5041495200000000000000000000000000000000000000000000005f82015250565b5f6126ec6009836126a8565b91506126f7826126b8565b602082019050919050565b5f6020820190508181035f830152612719816126e0565b9050919050565b7f494e53554646494349454e545f4c4951554944495459000000000000000000005f82015250565b5f6127546016836126a8565b915061275f82612720565b602082019050919050565b5f6020820190508181035f83015261278181612748565b9050919050565b7f556e697377617041646170746f722e67657451756f74653a20564f49445f51555f8201527f4f54455f524553554c5400000000000000000000000000000000000000000000602082015250565b5f6127e2602a836126a8565b91506127ed82612788565b604082019050919050565b5f6020820190508181035f83015261280f816127d6565b9050919050565b7f564f49445f4153534554000000000000000000000000000000000000000000005f82015250565b5f61284a600a836126a8565b915061285582612816565b602082019050919050565b5f6020820190508181035f8301526128778161283e565b9050919050565b61288781612051565b82525050565b5f6040820190506128a05f83018561287e565b6128ad602083018461287e565b9392505050565b5f815190506128c281612062565b92915050565b5f602082840312156128dd576128dc611f9e565b5b5f6128ea848285016128b4565b91505092915050565b7f504149525f4e4f545f464f554e440000000000000000000000000000000000005f82015250565b5f612927600e836126a8565b9150612932826128f3565b602082019050919050565b5f6020820190508181035f8301526129548161291b565b9050919050565b5f8151905061296981612098565b92915050565b5f6020828403121561298457612983611f9e565b5b5f6129918482850161295b565b91505092915050565b5f815190506129a8816120db565b92915050565b5f63ffffffff82169050919050565b6129c6816129ae565b81146129d0575f80fd5b50565b5f815190506129e1816129bd565b92915050565b5f805f606084860312156129fe576129fd611f9e565b5b5f612a0b8682870161299a565b9350506020612a1c8682870161299a565b9250506040612a2d868287016129d3565b9150509250925092565b7f556e697377617041646170746f723a20494e53554646494349454e545f4c49515f8201527f5549444954590000000000000000000000000000000000000000000000000000602082015250565b5f612a916026836126a8565b9150612a9c82612a37565b604082019050919050565b5f6020820190508181035f830152612abe81612a85565b9050919050565b7f556e6973776170456e67696e653a20564f49445f535741505f524551554553545f82015250565b5f612af96020836126a8565b9150612b0482612ac5565b602082019050919050565b5f6020820190508181035f830152612b2681612aed565b9050919050565b7f556e6973776170456e67696e653a20564f49445f51554f54455f524553554c545f82015250565b5f612b616020836126a8565b9150612b6c82612b2d565b602082019050919050565b5f6020820190508181035f830152612b8e81612b55565b9050919050565b7f556e6973776170456e67696e653a20534c4950504147455f455843454544535f5f8201527f5448524553484f4c440000000000000000000000000000000000000000000000602082015250565b5f612bef6029836126a8565b9150612bfa82612b95565b604082019050919050565b5f6020820190508181035f830152612c1c81612be3565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b5f819050919050565b5f819050919050565b5f612c7c612c77612c7284612c50565b612c59565b6121e2565b9050919050565b612c8c81612c62565b82525050565b5f81519050919050565b5f82825260208201905092915050565b5f819050602082019050919050565b5f612cc68383612370565b60208301905092915050565b5f602082019050919050565b5f612ce882612c92565b612cf28185612c9c565b9350612cfd83612cac565b805f5b83811015612d2d578151612d148882612cbb565b9750612d1f83612cd2565b925050600181019050612d00565b5085935050505092915050565b5f60a082019050612d4d5f830188612534565b612d5a6020830187612c83565b8181036040830152612d6c8186612cde565b9050612d7b606083018561287e565b612d886080830184612534565b9695505050505050565b5f80fd5b5f67ffffffffffffffff821115612db057612daf611fba565b5b602082029050602081019050919050565b5f80fd5b5f81519050612dd3816121eb565b92915050565b5f612deb612de684612d96565b612018565b90508083825260208201905060208402830185811115612e0e57612e0d612dc1565b5b835b81811015612e375780612e238882612dc5565b845260208401935050602081019050612e10565b5050509392505050565b5f82601f830112612e5557612e54612d92565b5b8151612e65848260208601612dd9565b91505092915050565b5f60208284031215612e8357612e82611f9e565b5b5f82015167ffffffffffffffff811115612ea057612e9f611fa2565b5b612eac84828501612e41565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f612eec826121e2565b9150612ef7836121e2565b9250828203905081811115612f0f57612f0e612eb5565b5b92915050565b7f556e697377617041646170746f722e737761702052454345495645445f4e4f545f8201527f48494e475f494e5f52455455524e000000000000000000000000000000000000602082015250565b5f612f6f602e836126a8565b9150612f7a82612f15565b604082019050919050565b5f6020820190508181035f830152612f9c81612f63565b9050919050565b5f608082019050612fb65f83018761287e565b612fc3602083018661287e565b612fd06040830185612534565b612fdd6060830184612534565b95945050505050565b5f602082019050612ff95f83018461287e565b92915050565b5f6020828403121561301457613013611f9e565b5b5f61302184828501612dc5565b91505092915050565b5f60608201905061303d5f830186612534565b61304a6020830185612534565b6130576040830184612534565b949350505050565b7f444543494d414c535f4f55545f4f465f424f554e4453000000000000000000005f82015250565b5f6130936016836126a8565b915061309e8261305f565b602082019050919050565b5f6020820190508181035f8301526130c081613087565b9050919050565b5f8160011c9050919050565b5f808291508390505b600185111561311c578086048111156130f8576130f7612eb5565b5b60018516156131075780820291505b8081029050613115856130c7565b94506130dc565b94509492505050565b5f8261313457600190506131ef565b81613141575f90506131ef565b8160018114613157576002811461316157613190565b60019150506131ef565b60ff84111561317357613172612eb5565b5b8360020a91508482111561318a57613189612eb5565b5b506131ef565b5060208310610133831016604e8410600b84101617156131c55782820a9050838111156131c0576131bf612eb5565b5b6131ef565b6131d284848460016130d3565b925090508184048111156131e9576131e8612eb5565b5b81810290505b9392505050565b5f613200826121e2565b915061320b8361208c565b92506132387fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484613125565b905092915050565b7f5245454e5452414e545f43414c4c0000000000000000000000000000000000005f82015250565b5f613274600e836126a8565b915061327f82613240565b602082019050919050565b5f6020820190508181035f8301526132a181613268565b9050919050565b7f494e53554646494349454e545f43414c4c45525f42414c414e434500000000005f82015250565b5f6132dc601b836126a8565b91506132e7826132a8565b602082019050919050565b5f6020820190508181035f830152613309816132d0565b9050919050565b5f6060820190506133235f83018661287e565b613330602083018561287e565b61333d6040830184612534565b949350505050565b5f8115159050919050565b61335981613345565b8114613363575f80fd5b50565b5f8151905061337481613350565b92915050565b5f6020828403121561338f5761338e611f9e565b5b5f61339c84828501613366565b91505092915050565b5f6040820190506133b85f83018561287e565b6133c56020830184612c83565b9392505050565b5f6040820190506133df5f83018561287e565b6133ec6020830184612534565b9392505050565b7f55494e545f554e444552000000000000000000000000000000000000000000005f82015250565b5f613427600a836126a8565b9150613432826133f3565b602082019050919050565b5f6020820190508181035f8301526134548161341b565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffd5b7f4d6174683a206d756c446976206f766572666c6f7700000000000000000000005f82015250565b5f6134bc6015836126a8565b91506134c782613488565b602082019050919050565b5f6020820190508181035f8301526134e9816134b0565b905091905056fea2646970667358221220f7e4d4d54be02f8b7cd0002b12e73c68735bc8f583c4063bf407400dbdd985f364736f6c634300081a0033" }))).unwrap())?.contractAddress!;
        let vToken = ((await machine.deploy({
            bytecode: "608060405234801561000f575f80fd5b506040516120a43803806120a4833981810160405281019061003191906102d6565b8282826100438161006e60201b60201c565b508160049081610053919061056b565b508060059081610063919061056b565b50505050505061063a565b5f805f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050815f806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b5f604051905090565b5f80fd5b5f80fd5b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61018e82610148565b810181811067ffffffffffffffff821117156101ad576101ac610158565b5b80604052505050565b5f6101bf61012f565b90506101cb8282610185565b919050565b5f67ffffffffffffffff8211156101ea576101e9610158565b5b6101f382610148565b9050602081019050919050565b8281835e5f83830152505050565b5f61022061021b846101d0565b6101b6565b90508281526020810184848401111561023c5761023b610144565b5b610247848285610200565b509392505050565b5f82601f83011261026357610262610140565b5b815161027384826020860161020e565b91505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6102a58261027c565b9050919050565b6102b58161029b565b81146102bf575f80fd5b50565b5f815190506102d0816102ac565b92915050565b5f805f606084860312156102ed576102ec610138565b5b5f84015167ffffffffffffffff81111561030a5761030961013c565b5b6103168682870161024f565b935050602084015167ffffffffffffffff8111156103375761033661013c565b5b6103438682870161024f565b9250506040610354868287016102c2565b9150509250925092565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f60028204905060018216806103ac57607f821691505b6020821081036103bf576103be610368565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026104217fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826103e6565b61042b86836103e6565b95508019841693508086168417925050509392505050565b5f819050919050565b5f819050919050565b5f61046f61046a61046584610443565b61044c565b610443565b9050919050565b5f819050919050565b61048883610455565b61049c61049482610476565b8484546103f2565b825550505050565b5f90565b6104b06104a4565b6104bb81848461047f565b505050565b5b818110156104de576104d35f826104a8565b6001810190506104c1565b5050565b601f821115610523576104f4816103c5565b6104fd846103d7565b8101602085101561050c578190505b610520610518856103d7565b8301826104c0565b50505b505050565b5f82821c905092915050565b5f6105435f1984600802610528565b1980831691505092915050565b5f61055b8383610534565b9150826002028217905092915050565b6105748261035e565b67ffffffffffffffff81111561058d5761058c610158565b5b6105978254610395565b6105a28282856104e2565b5f60209050601f8311600181146105d3575f84156105c1578287015190505b6105cb8582610550565b865550610632565b601f1984166105e1866103c5565b5f5b82811015610608578489015182556001820191506020850194506020810190506105e3565b868310156106255784890151610621601f891682610534565b8355505b6001600288020188555050505b505050505050565b611a5d806106475f395ff3fe608060405234801561000f575f80fd5b50600436106100fe575f3560e01c8063715018a611610095578063a457c2d711610064578063a457c2d71461029a578063a9059cbb146102ca578063dd62ed3e146102fa578063f2fde38b1461032a576100fe565b8063715018a6146102385780638da5cb5b1461024257806395d89b41146102605780639dc29fac1461027e576100fe565b8063313ce567116100d1578063313ce5671461019e57806339509351146101bc57806340c10f19146101ec57806370a0823114610208576100fe565b806306fdde0314610102578063095ea7b31461012057806318160ddd1461015057806323b872dd1461016e575b5f80fd5b61010a610346565b60405161011791906110d5565b60405180910390f35b61013a60048036038101906101359190611186565b6103d6565b60405161014791906111de565b60405180910390f35b6101586103f8565b6040516101659190611206565b60405180910390f35b6101886004803603810190610183919061121f565b610401565b60405161019591906111de565b60405180910390f35b6101a661042f565b6040516101b3919061128a565b60405180910390f35b6101d660048036038101906101d19190611186565b610437565b6040516101e391906111de565b60405180910390f35b61020660048036038101906102019190611186565b61046d565b005b610222600480360381019061021d91906112a3565b610483565b60405161022f9190611206565b60405180910390f35b6102406104c9565b005b61024a6104dc565b60405161025791906112dd565b60405180910390f35b610268610503565b60405161027591906110d5565b60405180910390f35b61029860048036038101906102939190611186565b610593565b005b6102b460048036038101906102af9190611186565b6105a9565b6040516102c191906111de565b60405180910390f35b6102e460048036038101906102df9190611186565b61061e565b6040516102f191906111de565b60405180910390f35b610314600480360381019061030f91906112f6565b610640565b6040516103219190611206565b60405180910390f35b610344600480360381019061033f91906112a3565b6106c2565b005b60606004805461035590611361565b80601f016020809104026020016040519081016040528092919081815260200182805461038190611361565b80156103cc5780601f106103a3576101008083540402835291602001916103cc565b820191905f5260205f20905b8154815290600101906020018083116103af57829003601f168201915b5050505050905090565b5f806103e0610744565b90506103ed81858561074b565b600191505092915050565b5f600354905090565b5f8061040b610744565b905061041885828561090e565b610423858585610999565b60019150509392505050565b5f6012905090565b5f80610441610744565b90506104628185856104538589610640565b61045d91906113be565b61074b565b600191505092915050565b610475610c08565b61047f8282610c86565b5050565b5f60015f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b6104d1610c08565b6104da5f610dd5565b565b5f805f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b60606005805461051290611361565b80601f016020809104026020016040519081016040528092919081815260200182805461053e90611361565b80156105895780601f1061056057610100808354040283529160200191610589565b820191905f5260205f20905b81548152906001019060200180831161056c57829003601f168201915b5050505050905090565b61059b610c08565b6105a58282610e96565b5050565b5f806105b3610744565b90505f6105c08286610640565b905083811015610605576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105fc90611461565b60405180910390fd5b610612828686840361074b565b60019250505092915050565b5f80610628610744565b9050610635818585610999565b600191505092915050565b5f60025f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b6106ca610c08565b5f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603610738576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161072f906114ef565b60405180910390fd5b61074181610dd5565b50565b5f33905090565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036107b9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107b09061157d565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610827576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161081e9061160b565b60405180910390fd5b8060025f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925836040516109019190611206565b60405180910390a3505050565b5f6109198484610640565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146109935781811015610985576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161097c90611673565b60405180910390fd5b610992848484840361074b565b5b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610a07576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109fe90611701565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610a75576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a6c9061178f565b60405180910390fd5b610a8083838361105b565b5f60015f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905081811015610b04576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610afb9061181d565b60405180910390fd5b81810360015f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055508160015f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610bef9190611206565b60405180910390a3610c02848484611060565b50505050565b610c10610744565b73ffffffffffffffffffffffffffffffffffffffff16610c2e6104dc565b73ffffffffffffffffffffffffffffffffffffffff1614610c84576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c7b90611885565b60405180910390fd5b565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610cf4576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ceb906118ed565b60405180910390fd5b610cff5f838361105b565b8060035f828254610d1091906113be565b925050819055508060015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055508173ffffffffffffffffffffffffffffffffffffffff165f73ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef83604051610dbe9190611206565b60405180910390a3610dd15f8383611060565b5050565b5f805f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050815f806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610f04576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610efb9061197b565b60405180910390fd5b610f0f825f8361105b565b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905081811015610f93576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f8a90611a09565b60405180910390fd5b81810360015f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055508160035f82825403925050819055505f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040516110439190611206565b60405180910390a3611056835f84611060565b505050565b505050565b505050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f6110a782611065565b6110b1818561106f565b93506110c181856020860161107f565b6110ca8161108d565b840191505092915050565b5f6020820190508181035f8301526110ed818461109d565b905092915050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f611122826110f9565b9050919050565b61113281611118565b811461113c575f80fd5b50565b5f8135905061114d81611129565b92915050565b5f819050919050565b61116581611153565b811461116f575f80fd5b50565b5f813590506111808161115c565b92915050565b5f806040838503121561119c5761119b6110f5565b5b5f6111a98582860161113f565b92505060206111ba85828601611172565b9150509250929050565b5f8115159050919050565b6111d8816111c4565b82525050565b5f6020820190506111f15f8301846111cf565b92915050565b61120081611153565b82525050565b5f6020820190506112195f8301846111f7565b92915050565b5f805f60608486031215611236576112356110f5565b5b5f6112438682870161113f565b93505060206112548682870161113f565b925050604061126586828701611172565b9150509250925092565b5f60ff82169050919050565b6112848161126f565b82525050565b5f60208201905061129d5f83018461127b565b92915050565b5f602082840312156112b8576112b76110f5565b5b5f6112c58482850161113f565b91505092915050565b6112d781611118565b82525050565b5f6020820190506112f05f8301846112ce565b92915050565b5f806040838503121561130c5761130b6110f5565b5b5f6113198582860161113f565b925050602061132a8582860161113f565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061137857607f821691505b60208210810361138b5761138a611334565b5b50919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f6113c882611153565b91506113d383611153565b92508282019050808211156113eb576113ea611391565b5b92915050565b7f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f775f8201527f207a65726f000000000000000000000000000000000000000000000000000000602082015250565b5f61144b60258361106f565b9150611456826113f1565b604082019050919050565b5f6020820190508181035f8301526114788161143f565b9050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f20615f8201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b5f6114d960268361106f565b91506114e48261147f565b604082019050919050565b5f6020820190508181035f830152611506816114cd565b9050919050565b7f45524332303a20617070726f76652066726f6d20746865207a65726f206164645f8201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b5f61156760248361106f565b91506115728261150d565b604082019050919050565b5f6020820190508181035f8301526115948161155b565b9050919050565b7f45524332303a20617070726f766520746f20746865207a65726f2061646472655f8201527f7373000000000000000000000000000000000000000000000000000000000000602082015250565b5f6115f560228361106f565b91506116008261159b565b604082019050919050565b5f6020820190508181035f830152611622816115e9565b9050919050565b7f45524332303a20696e73756666696369656e7420616c6c6f77616e63650000005f82015250565b5f61165d601d8361106f565b915061166882611629565b602082019050919050565b5f6020820190508181035f83015261168a81611651565b9050919050565b7f45524332303a207472616e736665722066726f6d20746865207a65726f2061645f8201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b5f6116eb60258361106f565b91506116f682611691565b604082019050919050565b5f6020820190508181035f830152611718816116df565b9050919050565b7f45524332303a207472616e7366657220746f20746865207a65726f20616464725f8201527f6573730000000000000000000000000000000000000000000000000000000000602082015250565b5f61177960238361106f565b91506117848261171f565b604082019050919050565b5f6020820190508181035f8301526117a68161176d565b9050919050565b7f45524332303a207472616e7366657220616d6f756e74206578636565647320625f8201527f616c616e63650000000000000000000000000000000000000000000000000000602082015250565b5f61180760268361106f565b9150611812826117ad565b604082019050919050565b5f6020820190508181035f830152611834816117fb565b9050919050565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65725f82015250565b5f61186f60208361106f565b915061187a8261183b565b602082019050919050565b5f6020820190508181035f83015261189c81611863565b9050919050565b7f45524332303a206d696e7420746f20746865207a65726f2061646472657373005f82015250565b5f6118d7601f8361106f565b91506118e2826118a3565b602082019050919050565b5f6020820190508181035f830152611904816118cb565b9050919050565b7f45524332303a206275726e2066726f6d20746865207a65726f206164647265735f8201527f7300000000000000000000000000000000000000000000000000000000000000602082015250565b5f61196560218361106f565b91506119708261190b565b604082019050919050565b5f6020820190508181035f83015261199281611959565b9050919050565b7f45524332303a206275726e20616d6f756e7420657863656564732062616c616e5f8201527f6365000000000000000000000000000000000000000000000000000000000000602082015250565b5f6119f360228361106f565b91506119fe82611999565b604082019050919050565b5f6020820190508181035f830152611a20816119e7565b905091905056fea264697066735822122069ddc20d1f7549a947b1646d6764eac5d645a62b610853c64426480ff9296d9864736f6c634300081a0033",
            abi: [
                {
                    "inputs": [
                        {
                            "internalType": "string",
                            "name": "name",
                            "type": "string"
                        },
                        {
                            "internalType": "string",
                            "name": "symbol",
                            "type": "string"
                        },
                        {
                            "internalType": "address",
                            "name": "owner",
                            "type": "address"
                        }
                    ],
                    "stateMutability": "nonpayable",
                    "type": "constructor"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {
                            "indexed": true,
                            "internalType": "address",
                            "name": "owner",
                            "type": "address"
                        },
                        {
                            "indexed": true,
                            "internalType": "address",
                            "name": "spender",
                            "type": "address"
                        },
                        {
                            "indexed": false,
                            "internalType": "uint256",
                            "name": "value",
                            "type": "uint256"
                        }
                    ],
                    "name": "Approval",
                    "type": "event"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {
                            "indexed": true,
                            "internalType": "address",
                            "name": "previousOwner",
                            "type": "address"
                        },
                        {
                            "indexed": true,
                            "internalType": "address",
                            "name": "newOwner",
                            "type": "address"
                        }
                    ],
                    "name": "OwnershipTransferred",
                    "type": "event"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {
                            "indexed": true,
                            "internalType": "address",
                            "name": "from",
                            "type": "address"
                        },
                        {
                            "indexed": true,
                            "internalType": "address",
                            "name": "to",
                            "type": "address"
                        },
                        {
                            "indexed": false,
                            "internalType": "uint256",
                            "name": "value",
                            "type": "uint256"
                        }
                    ],
                    "name": "Transfer",
                    "type": "event"
                },
                {
                    "inputs": [
                        {
                            "internalType": "address",
                            "name": "owner",
                            "type": "address"
                        },
                        {
                            "internalType": "address",
                            "name": "spender",
                            "type": "address"
                        }
                    ],
                    "name": "allowance",
                    "outputs": [
                        {
                            "internalType": "uint256",
                            "name": "",
                            "type": "uint256"
                        }
                    ],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "address",
                            "name": "spender",
                            "type": "address"
                        },
                        {
                            "internalType": "uint256",
                            "name": "amount",
                            "type": "uint256"
                        }
                    ],
                    "name": "approve",
                    "outputs": [
                        {
                            "internalType": "bool",
                            "name": "",
                            "type": "bool"
                        }
                    ],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "address",
                            "name": "account",
                            "type": "address"
                        }
                    ],
                    "name": "balanceOf",
                    "outputs": [
                        {
                            "internalType": "uint256",
                            "name": "",
                            "type": "uint256"
                        }
                    ],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "address",
                            "name": "account",
                            "type": "address"
                        },
                        {
                            "internalType": "uint256",
                            "name": "amount",
                            "type": "uint256"
                        }
                    ],
                    "name": "burn",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "decimals",
                    "outputs": [
                        {
                            "internalType": "uint8",
                            "name": "",
                            "type": "uint8"
                        }
                    ],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "address",
                            "name": "spender",
                            "type": "address"
                        },
                        {
                            "internalType": "uint256",
                            "name": "subtractedValue",
                            "type": "uint256"
                        }
                    ],
                    "name": "decreaseAllowance",
                    "outputs": [
                        {
                            "internalType": "bool",
                            "name": "",
                            "type": "bool"
                        }
                    ],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "address",
                            "name": "spender",
                            "type": "address"
                        },
                        {
                            "internalType": "uint256",
                            "name": "addedValue",
                            "type": "uint256"
                        }
                    ],
                    "name": "increaseAllowance",
                    "outputs": [
                        {
                            "internalType": "bool",
                            "name": "",
                            "type": "bool"
                        }
                    ],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "address",
                            "name": "account",
                            "type": "address"
                        },
                        {
                            "internalType": "uint256",
                            "name": "amount",
                            "type": "uint256"
                        }
                    ],
                    "name": "mint",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "name",
                    "outputs": [
                        {
                            "internalType": "string",
                            "name": "",
                            "type": "string"
                        }
                    ],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "owner",
                    "outputs": [
                        {
                            "internalType": "address",
                            "name": "",
                            "type": "address"
                        }
                    ],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "renounceOwnership",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "symbol",
                    "outputs": [
                        {
                            "internalType": "string",
                            "name": "",
                            "type": "string"
                        }
                    ],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "totalSupply",
                    "outputs": [
                        {
                            "internalType": "uint256",
                            "name": "",
                            "type": "uint256"
                        }
                    ],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "address",
                            "name": "to",
                            "type": "address"
                        },
                        {
                            "internalType": "uint256",
                            "name": "amount",
                            "type": "uint256"
                        }
                    ],
                    "name": "transfer",
                    "outputs": [
                        {
                            "internalType": "bool",
                            "name": "",
                            "type": "bool"
                        }
                    ],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "address",
                            "name": "from",
                            "type": "address"
                        },
                        {
                            "internalType": "address",
                            "name": "to",
                            "type": "address"
                        },
                        {
                            "internalType": "uint256",
                            "name": "amount",
                            "type": "uint256"
                        }
                    ],
                    "name": "transferFrom",
                    "outputs": [
                        {
                            "internalType": "bool",
                            "name": "",
                            "type": "bool"
                        }
                    ],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "address",
                            "name": "newOwner",
                            "type": "address"
                        }
                    ],
                    "name": "transferOwnership",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                }
            ],
            args: [
                "TestToken",
                "vTT",
                await signer.getAddress()
            ]
        })).unwrap())?.contractAddress!;
        let vault = ((await machine.deploy({
            bytecode: "608060405234801561000f575f80fd5b506040516132fe3803806132fe83398181016040528101906100319190610650565b600583805f806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060125f8054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa1580156100dd573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061010191906106d6565b60ff1614610144576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161013b9061075b565b60405180910390fd5b50805f601c6101000a81548163ffffffff021916908363ffffffff16021790555061017361041c60201b60201c565b50733c499c542cef5e3811e1192ce70d8cc03d5c335960015f6005811061019d5761019c610779565b5b015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550737ceb23fd6bc0add59e62ac25578270cff1b9f6196001806005811061020457610203610779565b5b015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507353e0bca35ec356bd5dddfebbd1fc0fd03fabad39600160026005811061026c5761026b610779565b5b015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550730d500b1d8e8ef31e21c99d1db9a6444d3adf127060016003600581106102d4576102d3610779565b5b015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550731bfd67037b42cf73acf2047067bd4f2c47d9bfd6600160046005811061033c5761033b610779565b5b015f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081600b5f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505f5b60058160ff16101561041357818160ff16600581106103de576103dd610779565b5b602002015160068260ff16600581106103fa576103f9610779565b5b018190555060018161040c91906107d3565b90506103bc565b5050505061084d565b425f60146101000a81548163ffffffff021916908363ffffffff1602179055505f601c9054906101000a900463ffffffff16425f60189054906101000a900463ffffffff1661046b9190610816565b6104759190610816565b50565b5f604051905090565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6104ae82610485565b9050919050565b6104be816104a4565b81146104c8575f80fd5b50565b5f815190506104d9816104b5565b92915050565b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b610529826104e3565b810181811067ffffffffffffffff82111715610548576105476104f3565b5b80604052505050565b5f61055a610478565b90506105668282610520565b919050565b5f67ffffffffffffffff821115610585576105846104f3565b5b602082029050919050565b5f80fd5b5f819050919050565b6105a681610594565b81146105b0575f80fd5b50565b5f815190506105c18161059d565b92915050565b5f6105d96105d48461056b565b610551565b905080602084028301858111156105f3576105f2610590565b5b835b8181101561061c578061060888826105b3565b8452602084019350506020810190506105f5565b5050509392505050565b5f82601f83011261063a576106396104df565b5b60056106478482856105c7565b91505092915050565b5f805f60e0848603121561066757610666610481565b5b5f610674868287016104cb565b9350506020610685868287016104cb565b925050604061069686828701610626565b9150509250925092565b5f60ff82169050919050565b6106b5816106a0565b81146106bf575f80fd5b50565b5f815190506106d0816106ac565b92915050565b5f602082840312156106eb576106ea610481565b5b5f6106f8848285016106c2565b91505092915050565b5f82825260208201905092915050565b7f564f49445f544f4b454e000000000000000000000000000000000000000000005f82015250565b5f610745600a83610701565b915061075082610711565b602082019050919050565b5f6020820190508181035f83015261077281610739565b9050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f6107dd826106a0565b91506107e8836106a0565b9250828201905060ff811115610801576108006107a6565b5b92915050565b5f63ffffffff82169050919050565b5f61082082610807565b915061082b83610807565b9250828201905063ffffffff811115610847576108466107a6565b5b92915050565b612aa48061085a5f395ff3fe608060405234801561000f575f80fd5b5060043610610086575f3560e01c80637d7c2a1c116100595780637d7c2a1c14610126578063a0712d6814610130578063b3d7f6b914610160578063dd5626cf1461019057610086565b806301e1d1141461008a57806318160ddd146100a857806318d9ae77146100c657806342966c68146100f6575b5f80fd5b6100926101c0565b60405161009f9190611dbb565b60405180910390f35b6100b06103d2565b6040516100bd9190611dbb565b60405180910390f35b6100e060048036038101906100db9190611e17565b610465565b6040516100ed9190611dbb565b60405180910390f35b610110600480360381019061010b9190611e6c565b6105a7565b60405161011d9190611eb1565b60405180910390f35b61012e610bff565b005b61014a60048036038101906101459190611e6c565b610cc4565b6040516101579190611eb1565b60405180910390f35b61017a60048036038101906101759190611e6c565b610f30565b6040516101879190611dbb565b60405180910390f35b6101aa60048036038101906101a59190611e6c565b610f51565b6040516101b79190611dbb565b60405180910390f35b5f806102d9733c499c542cef5e3811e1192ce70d8cc03d5c335973ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b81526004016102129190611f09565b602060405180830381865afa15801561022d573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906102519190611f36565b733c499c542cef5e3811e1192ce70d8cc03d5c335973ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa1580156102ae573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906102d29190611f75565b6012610f72565b90505f600190505b60058160ff1610156103ca575f60018260ff166005811061030557610304611fa0565b5b015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16146103b5575f8061039583733c499c542cef5e3811e1192ce70d8cc03d5c335960068760ff166005811061038d5761038c611fa0565b5b01545f611034565b9150915080156103b2578160800151856103af9190611ffa565b94505b50505b506001816103c3919061202d565b90506102e1565b508091505090565b5f805f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166318160ddd6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561043c573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104609190611f36565b905090565b5f8060018360ff166005811061047e5761047d611fa0565b5b015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505f8173ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa1580156104eb573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061050f9190611f75565b90505f8273ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b815260040161054b9190611f09565b602060405180830381865afa158015610566573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061058a9190611f36565b90505f61059982846012610f72565b905080945050505050919050565b5f806105b283610f51565b90505f81036105f6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105ed906120bb565b60405180910390fd5b6105ff83611159565b5f6106236106148361060f6101c0565b6111e3565b68056bc75e2d631000006111ff565b90505f600190505b60058160ff161015610a13575f60018260ff166005811061064f5761064e611fa0565b5b015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16146109fe575f8190505f733c499c542cef5e3811e1192ce70d8cc03d5c335990505f806106ee848460068960ff16600581106106df576106de611fa0565b5b01546106e96103d2565b611034565b9150915080156109f8575f610719610713846040015168056bc75e2d631000006111e3565b896111ff565b9050610723611b79565b85816040019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505084816060019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505081816080018181525050674563918244f400008160a00181815250505f806107ef735757371414417b8c6caad45baef941abc7d3ab3273a5e0829caced8ffdd4de3c43696c57f7d7a678ff8a8a88671bc16d674ec8000061121b565b9150915080156108f6575f8773ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015610843573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906108679190611f75565b90508773ffffffffffffffffffffffffffffffffffffffff1663a9059cbb3361089286601286610f72565b6040518363ffffffff1660e01b81526004016108af9291906120d9565b6020604051808303815f875af11580156108cb573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906108ef919061212a565b50506109ef565b5f8873ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015610940573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906109649190611f75565b90508873ffffffffffffffffffffffffffffffffffffffff1663a9059cbb3361098f88601286610f72565b6040518363ffffffff1660e01b81526004016109ac9291906120d9565b6020604051808303815f875af11580156109c8573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906109ec919061212a565b50505b505050506109f9565b5b505050505b50600181610a0c919061202d565b905061062b565b505f733c499c542cef5e3811e1192ce70d8cc03d5c335973ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015610a72573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610a969190611f75565b90505f733c499c542cef5e3811e1192ce70d8cc03d5c335973ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401610ae69190611f09565b602060405180830381865afa158015610b01573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610b259190611f36565b90505f610b3482846012610f72565b90505f610b53610b4d8368056bc75e2d631000006111e3565b866111ff565b9050733c499c542cef5e3811e1192ce70d8cc03d5c335973ffffffffffffffffffffffffffffffffffffffff1663a9059cbb33610b9284601289610f72565b6040518363ffffffff1660e01b8152600401610baf9291906120d9565b6020604051808303815f875af1158015610bcb573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610bef919061212a565b5060019650505050505050919050565b5f60189054906101000a900463ffffffff1663ffffffff164211610c58576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c4f9061219f565b60405180910390fd5b5f600190505b60058160ff161015610c8857610c73816113f8565b50600181610c81919061202d565b9050610c5e565b505f600190505b60058160ff161015610cb957610ca481611561565b50600181610cb2919061202d565b9050610c8f565b50610cc26116df565b565b5f80610ccf83610f30565b90505f8103610d13576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d0a906120bb565b60405180910390fd5b5f733c499c542cef5e3811e1192ce70d8cc03d5c335973ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa158015610d71573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610d959190611f75565b90505f733c499c542cef5e3811e1192ce70d8cc03d5c335973ffffffffffffffffffffffffffffffffffffffff166370a08231336040518263ffffffff1660e01b8152600401610de59190611f09565b602060405180830381865afa158015610e00573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610e249190611f36565b90505f610e3382846012610f72565b905085811015610e78576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e6f90612207565b60405180910390fd5b5f610e8587601286610f72565b9050733c499c542cef5e3811e1192ce70d8cc03d5c335973ffffffffffffffffffffffffffffffffffffffff166323b872dd3330846040518463ffffffff1660e01b8152600401610ed893929190612225565b6020604051808303815f875af1158015610ef4573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610f18919061212a565b50610f228561173b565b600195505050505050919050565b5f610f4a82610f3d6101c0565b610f456103d2565b6117c5565b9050919050565b5f610f6b82610f5e6101c0565b610f666103d2565b611840565b9050919050565b5f60028360ff1610158015610f8b575060028260ff1610155b8015610f9b575060128360ff1611155b8015610fab575060128260ff1611155b610fea576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610fe1906122a4565b60405180910390fd5b5f841480610ffd57508160ff168360ff16145b611029576110248483600a61101291906123f1565b85600a61101f91906123f1565b6118a9565b61102b565b835b90509392505050565b61103c611c01565b5f805f611073735757371414417b8c6caad45baef941abc7d3ab3273a5e0829caced8ffdd4de3c43696c57f7d7a678ff8a8a6118be565b915091508061109257611084611c01565b805f94509450505050611150565b600b5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639ef8b9ec8388886040518463ffffffff1660e01b81526004016110f093929190612536565b61016060405180830381865afa92505050801561112b57506040513d601f19601f820116820180604052508101906111289190612703565b60015b61114557611137611c01565b805f94509450505050611150565b806001945094505050505b94509492505050565b5f8054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639dc29fac33836040518363ffffffff1660e01b81526004016111b39291906120d9565b5f604051808303815f87803b1580156111ca575f80fd5b505af11580156111dc573d5f803e3d5ffd5b5050505050565b5f6111f783670de0b6b3a7640000846118a9565b905092915050565b5f6112138383670de0b6b3a76400006118a9565b905092915050565b5f805f6040518060c001604052808a73ffffffffffffffffffffffffffffffffffffffff1681526020018973ffffffffffffffffffffffffffffffffffffffff1681526020018873ffffffffffffffffffffffffffffffffffffffff1681526020018773ffffffffffffffffffffffffffffffffffffffff1681526020018681526020018581525090505f8773ffffffffffffffffffffffffffffffffffffffff1663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa1580156112ef573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906113139190611f75565b90508773ffffffffffffffffffffffffffffffffffffffff1663095ea7b3600b5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1661135f89601286610f72565b6040518363ffffffff1660e01b815260040161137c9291906120d9565b6020604051808303815f875af1158015611398573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906113bc919061212a565b506040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113ef90612779565b60405180910390fd5b5f8060018360ff166005811061141157611410611fa0565b5b015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603611470575f91505061155c565b5f60068460ff166005811061148857611487611fa0565b5b015490505f806114b584733c499c542cef5e3811e1192ce70d8cc03d5c3359856114b06101c0565b611034565b91509150806114ca575f94505050505061155c565b5f8260c00151036114e1575f94505050505061155c565b5f8061153a735757371414417b8c6caad45baef941abc7d3ab3273a5e0829caced8ffdd4de3c43696c57f7d7a678ff88733c499c542cef5e3811e1192ce70d8cc03d5c33598860c0015168056bc75e2d6310000061121b565b9150915080611551575f965050505050505061155c565b600196505050505050505b919050565b5f8060018360ff166005811061157a57611579611fa0565b5b015f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036115d9575f9150506116da565b5f60068460ff16600581106115f1576115f0611fa0565b5b015490505f8061161e84733c499c542cef5e3811e1192ce70d8cc03d5c3359856116196101c0565b611034565b9150915080611633575f9450505050506116da565b5f8260e001510361164a575f9450505050506116da565b5f82608001518360a0015161165f9190612797565b90505f806116b6735757371414417b8c6caad45baef941abc7d3ab3273a5e0829caced8ffdd4de3c43696c57f7d7a678ff733c499c542cef5e3811e1192ce70d8cc03d5c33598a8768056bc75e2d6310000061121b565b91509150806116ce575f9750505050505050506116da565b60019750505050505050505b919050565b425f60146101000a81548163ffffffff021916908363ffffffff1602179055505f601c9054906101000a900463ffffffff16425f60189054906101000a900463ffffffff1661172e91906127d9565b61173891906127d9565b50565b5f8054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166340c10f1933836040518363ffffffff1660e01b81526004016117959291906120d9565b5f604051808303815f87803b1580156117ac575f80fd5b505af11580156117be573d5f803e3d5ffd5b5050505050565b5f80831480156117d457505f82145b156117ea57683635c9adc5dea000009050611839565b5f83141580156117f957505f82145b1561180f57683635c9adc5dea000009050611839565b5f8314801561181e57505f8214155b1561182b575f9050611839565b6118368483856118a9565b90505b9392505050565b5f808314801561184f57505f82145b1561185c575f90506118a2565b5f831415801561186b57505f82145b15611878575f90506118a2565b5f8314801561188757505f8214155b15611894575f90506118a2565b61189f8484846118a9565b90505b9392505050565b5f6118b5848484611a6f565b90509392505050565b6118c6611c50565b5f6118cf611d27565b86815f019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505085816020019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505084816040019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505083816060019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050600b5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16634b08f125826040518263ffffffff1660e01b8152600401611a089190612863565b61012060405180830381865afa925050508015611a4357506040513d601f19601f82011682018060405250810190611a4091906129ad565b60015b611a5c57611a4f611c50565b805f935093505050611a66565b8060019350935050505b94509492505050565b5f805f80198587098587029250828110838203039150505f8103611aa757838281611a9d57611a9c6129d9565b5b0492505050611b72565b808411611ae9576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611ae090612a50565b60405180910390fd5b5f8486880990508281118203915080830392505f60018619018616905080860495508084049350600181825f0304019050808302841793505f600287600302189050808702600203810290508087026002038102905080870260020381029050808702600203810290508087026002038102905080870260020381029050808502955050505050505b9392505050565b6040518060c001604052805f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f81526020015f81525090565b6040518061016001604052805f81526020015f81526020015f81526020015f81526020015f81526020015f81526020015f81526020015f81526020015f81526020015f81526020015f81525090565b6040518061012001604052805f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f60ff1681526020015f60ff1681526020015f6dffffffffffffffffffffffffffff1681526020015f6dffffffffffffffffffffffffffff1681525090565b60405180608001604052805f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681526020015f73ffffffffffffffffffffffffffffffffffffffff1681525090565b5f819050919050565b611db581611da3565b82525050565b5f602082019050611dce5f830184611dac565b92915050565b5f604051905090565b5f80fd5b5f60ff82169050919050565b611df681611de1565b8114611e00575f80fd5b50565b5f81359050611e1181611ded565b92915050565b5f60208284031215611e2c57611e2b611ddd565b5b5f611e3984828501611e03565b91505092915050565b611e4b81611da3565b8114611e55575f80fd5b50565b5f81359050611e6681611e42565b92915050565b5f60208284031215611e8157611e80611ddd565b5b5f611e8e84828501611e58565b91505092915050565b5f8115159050919050565b611eab81611e97565b82525050565b5f602082019050611ec45f830184611ea2565b92915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f611ef382611eca565b9050919050565b611f0381611ee9565b82525050565b5f602082019050611f1c5f830184611efa565b92915050565b5f81519050611f3081611e42565b92915050565b5f60208284031215611f4b57611f4a611ddd565b5b5f611f5884828501611f22565b91505092915050565b5f81519050611f6f81611ded565b92915050565b5f60208284031215611f8a57611f89611ddd565b5b5f611f9784828501611f61565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f61200482611da3565b915061200f83611da3565b925082820190508082111561202757612026611fcd565b5b92915050565b5f61203782611de1565b915061204283611de1565b9250828201905060ff81111561205b5761205a611fcd565b5b92915050565b5f82825260208201905092915050565b7f43414c4c45525f574f554c445f524543454956455f4e4f5448494e47000000005f82015250565b5f6120a5601c83612061565b91506120b082612071565b602082019050919050565b5f6020820190508181035f8301526120d281612099565b9050919050565b5f6040820190506120ec5f830185611efa565b6120f96020830184611dac565b9392505050565b61210981611e97565b8114612113575f80fd5b50565b5f8151905061212481612100565b92915050565b5f6020828403121561213f5761213e611ddd565b5b5f61214c84828501612116565b91505092915050565b7f434f4f4c444f574e0000000000000000000000000000000000000000000000005f82015250565b5f612189600883612061565b915061219482612155565b602082019050919050565b5f6020820190508181035f8301526121b68161217d565b9050919050565b7f494e53554646494349454e545f43414c4c45525f42414c414e434500000000005f82015250565b5f6121f1601b83612061565b91506121fc826121bd565b602082019050919050565b5f6020820190508181035f83015261221e816121e5565b9050919050565b5f6060820190506122385f830186611efa565b6122456020830185611efa565b6122526040830184611dac565b949350505050565b7f444543494d414c535f4f55545f4f465f424f554e4453000000000000000000005f82015250565b5f61228e601683612061565b91506122998261225a565b602082019050919050565b5f6020820190508181035f8301526122bb81612282565b9050919050565b5f8160011c9050919050565b5f808291508390505b6001851115612317578086048111156122f3576122f2611fcd565b5b60018516156123025780820291505b8081029050612310856122c2565b94506122d7565b94509492505050565b5f8261232f57600190506123ea565b8161233c575f90506123ea565b8160018114612352576002811461235c5761238b565b60019150506123ea565b60ff84111561236e5761236d611fcd565b5b8360020a91508482111561238557612384611fcd565b5b506123ea565b5060208310610133831016604e8410600b84101617156123c05782820a9050838111156123bb576123ba611fcd565b5b6123ea565b6123cd84848460016122ce565b925090508184048111156123e4576123e3611fcd565b5b81810290505b9392505050565b5f6123fb82611da3565b915061240683611de1565b92506124337fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484612320565b905092915050565b61244481611ee9565b82525050565b61245381611de1565b82525050565b5f6dffffffffffffffffffffffffffff82169050919050565b61247b81612459565b82525050565b61012082015f8201516124965f85018261243b565b5060208201516124a9602085018261243b565b5060408201516124bc604085018261243b565b5060608201516124cf606085018261243b565b5060808201516124e2608085018261243b565b5060a08201516124f560a085018261244a565b5060c082015161250860c085018261244a565b5060e082015161251b60e0850182612472565b50610100820151612530610100850182612472565b50505050565b5f6101608201905061254a5f830186612481565b612558610120830185611dac565b612566610140830184611dac565b949350505050565b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6125b882612572565b810181811067ffffffffffffffff821117156125d7576125d6612582565b5b80604052505050565b5f6125e9611dd4565b90506125f582826125af565b919050565b5f61016082840312156126105761260f61256e565b5b61261b6101606125e0565b90505f61262a84828501611f22565b5f83015250602061263d84828501611f22565b602083015250604061265184828501611f22565b604083015250606061266584828501611f22565b606083015250608061267984828501611f22565b60808301525060a061268d84828501611f22565b60a08301525060c06126a184828501611f22565b60c08301525060e06126b584828501611f22565b60e0830152506101006126ca84828501611f22565b610100830152506101206126e084828501611f22565b610120830152506101406126f684828501611f22565b6101408301525092915050565b5f610160828403121561271957612718611ddd565b5b5f612726848285016125fa565b91505092915050565b7f53544f50000000000000000000000000000000000000000000000000000000005f82015250565b5f612763600483612061565b915061276e8261272f565b602082019050919050565b5f6020820190508181035f83015261279081612757565b9050919050565b5f6127a182611da3565b91506127ac83611da3565b92508282039050818111156127c4576127c3611fcd565b5b92915050565b5f63ffffffff82169050919050565b5f6127e3826127ca565b91506127ee836127ca565b9250828201905063ffffffff81111561280a57612809611fcd565b5b92915050565b608082015f8201516128245f85018261243b565b506020820151612837602085018261243b565b50604082015161284a604085018261243b565b50606082015161285d606085018261243b565b50505050565b5f6080820190506128765f830184612810565b92915050565b61288581611ee9565b811461288f575f80fd5b50565b5f815190506128a08161287c565b92915050565b6128af81612459565b81146128b9575f80fd5b50565b5f815190506128ca816128a6565b92915050565b5f61012082840312156128e6576128e561256e565b5b6128f16101206125e0565b90505f61290084828501612892565b5f83015250602061291384828501612892565b602083015250604061292784828501612892565b604083015250606061293b84828501612892565b606083015250608061294f84828501612892565b60808301525060a061296384828501611f61565b60a08301525060c061297784828501611f61565b60c08301525060e061298b848285016128bc565b60e0830152506101006129a0848285016128bc565b6101008301525092915050565b5f61012082840312156129c3576129c2611ddd565b5b5f6129d0848285016128d0565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601260045260245ffd5b7f4d6174683a206d756c446976206f766572666c6f7700000000000000000000005f82015250565b5f612a3a601583612061565b9150612a4582612a06565b602082019050919050565b5f6020820190508181035f830152612a6781612a2e565b905091905056fea26469706673582212203d1229a908f956c2ded1161b0ceeef659c1835efa2d0d72a69e45899f7ac71ca64736f6c634300081a0033",
            abi: [
                {
                    "inputs": [
                        {
                            "internalType": "address",
                            "name": "vToken",
                            "type": "address"
                        },
                        {
                            "internalType": "address",
                            "name": "adaptor",
                            "type": "address"
                        },
                        {
                            "internalType": "uint256[5]",
                            "name": "weightings",
                            "type": "uint256[5]"
                        }
                    ],
                    "stateMutability": "nonpayable",
                    "type": "constructor"
                },
                {
                    "inputs": [
                        {
                            "internalType": "uint256",
                            "name": "supplyIn",
                            "type": "uint256"
                        }
                    ],
                    "name": "burn",
                    "outputs": [
                        {
                            "internalType": "bool",
                            "name": "",
                            "type": "bool"
                        }
                    ],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "uint256",
                            "name": "assetsIn",
                            "type": "uint256"
                        }
                    ],
                    "name": "mint",
                    "outputs": [
                        {
                            "internalType": "bool",
                            "name": "",
                            "type": "bool"
                        }
                    ],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "uint256",
                            "name": "supplyIn",
                            "type": "uint256"
                        }
                    ],
                    "name": "previewBurn",
                    "outputs": [
                        {
                            "internalType": "uint256",
                            "name": "",
                            "type": "uint256"
                        }
                    ],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [
                        {
                            "internalType": "uint256",
                            "name": "assetsIn",
                            "type": "uint256"
                        }
                    ],
                    "name": "previewMint",
                    "outputs": [
                        {
                            "internalType": "uint256",
                            "name": "",
                            "type": "uint256"
                        }
                    ],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "rebalance",
                    "outputs": [],
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "totalAssets",
                    "outputs": [
                        {
                            "internalType": "uint256",
                            "name": "",
                            "type": "uint256"
                        }
                    ],
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "inputs": [],
                    "name": "totalSupply",
                    "outputs": [
                        {
                            "internalType": "uint256",
                            "name": "",
                            "type": "uint256"
                        }
                    ],
                    "stateMutability": "view",
                    "type": "function"
                }
            ],
            args: [
                vToken,
                adaptor,
                [
                    20,
                    20,
                    20,
                    20,
                    20
                ]
            ]
        })).unwrap())?.contractAddress!;
        (await machine.invoke({ 
            to: vToken, 
            methodSignature: "function transferOwnership(address) external", 
            methodName: "transferOwnership",
            methodArgs: [
                vault
            ]
        })).unwrap();

        function Vault() {
            async function holdings(slotIndex: bigint) {
                return Number((await machine.query({
                    to: vault,
                    methodSignature: "function holdings(uint8) external view returns (uint256)",
                    methodName: "holdings",
                    methodArgs: [
                        slotIndex
                    ]
                })).unwrap() as bigint) / 10**18;
            }

            async function mint(assetsIn: number) {
                (await machine.invoke({
                    to: tokens.usdc,
                    methodSignature: "function approve(address,uint256) external",
                    methodName: "approve",
                    methodArgs: [
                        vault,
                        BigInt(assetsIn * 10**18)
                    ]
                })).unwrap();
                (await machine.invoke({
                    to: vault,
                    methodSignature: "function mint(uint256) external",
                    methodName: "mint",
                    methodArgs: [
                        BigInt(assetsIn * 10**18)
                    ]
                })).unwrap();
            }

            async function burn(supplyIn: number) {
                (await machine.invoke({
                    to: vault,
                    methodSignature: "function burn(uint256) external",
                    methodName: "burn",
                    methodArgs: [
                        BigInt(supplyIn * 10**18)
                    ]
                })).unwrap();
            }

            async function totalSupply() {
                let bigint = (await machine.query({
                    to: vault,
                    methodSignature: "function totalSupply() external view returns (uint256)",
                    methodName: "totalSupply"
                })).unwrap() as bigint;
                return Number(bigint) / 10**18;
            }

            async function totalAssets() {
                let bigint = (await machine.query({
                    to: vault,
                    methodSignature: "function totalAssets() external view returns (uint256)",
                    methodName: "totalAssets"
                })).unwrap() as bigint;
                return Number(bigint) / 10**18;
            }

            return {
                holdings,
                mint,
                burn,
                totalSupply,
                totalAssets
            };
        }

        let intf = Vault();

        await (async function() {
            /** User mint test. */
            await intf.mint(500);
            log(
                await intf.holdings(0n),
                await intf.holdings(1n),
                await intf.holdings(2n),
                await intf.holdings(3n),
                await intf.holdings(4n)
            );  
            
            (await machine.invoke({
                to: vault,
                methodSignature: "function rebalance() external",
                methodName: "rebalance"
            })).unwrap()

            log(
                await intf.holdings(0n),
                await intf.holdings(1n),
                await intf.holdings(2n),
                await intf.holdings(3n),
                await intf.holdings(4n)
            );  
        })();

    })();
})();

function log(...any: any[]) {
    return console.log(...any);
}

function err(...any: any[]) {
    return console.error(...any);
}

function format(any: any) {
    return Number(any) / 10**18
}